<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”± | Kunyang&#39;s Blog</title>
<meta name="keywords" content="Raspberry Pi, OpenWrt">
<meta name="description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…">
<meta name="author" content="Kyxie">
<link rel="canonical" href="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.1922b49974f4fb943cea06098875ffc163ffa54447b089e124d7ae367d9e2801.css" integrity="sha256-GSK0mXT0&#43;5Q86gYJiHX/wWP/pURHsInhJNeuNn2eKAE=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.f61a30837a1dd79c8e15931b0916e2469274f1900212a78e5fcc9b3d40026a16.js" integrity="sha256-9howg3od15yOFZMbCRbiRpJ08ZACEqeOX8ybPUACahY="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kyxie.me/Favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kyxie.me/Favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kyxie.me/Favicon.png">
<link rel="apple-touch-icon" href="https://kyxie.me/Favicon.png">
<link rel="mask-icon" href="https://kyxie.me/Favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://kyxie.me/en/blog/tech/router/raspberrypi-openwrt/">
<link rel="alternate" hreflang="zh" href="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script>





<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">


<link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet"><meta property="og:title" content="æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±" />
<meta property="og:description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-11-11T13:13:13-04:00" />
<meta property="article:modified_time" content="2024-12-27T21:01:52-05:00" /><meta property="og:site_name" content="Kyxie" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±"/>
<meta name="twitter:description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "åšå®¢ ğŸ“’",
      "item": "https://kyxie.me/zh/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "æŠ€æœ¯ ğŸ”§",
      "item": "https://kyxie.me/zh/blog/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "è·¯ç”± ğŸ›œ",
      "item": "https://kyxie.me/zh/blog/tech/router/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "æ ‘è“æ´¾4B+å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
      "item": "https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "æ ‘è“æ´¾4B+å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
  "name": "æ ‘è“æ´¾4B\u002bå®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
  "description": "éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+ 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…",
  "keywords": [
    "Raspberry Pi", "OpenWrt"
  ],
  "articleBody": "éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+ 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…é¡»ï¼‰ï¼ŒMicro USB - HDMIçº¿ï¼ˆéå¿…é¡»ï¼‰ è½¯ä»¶ Balena Etcherï¼ŒMacBookç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸‹è½½è¿™ä¸ªï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨å‘½ä»¤è¡Œä»£æ›¿ VM Virtual Boxå’ŒUbuntuè™šæ‹Ÿæœºï¼Œéå¿…é¡»ï¼Œç”¨äºç¼–è¯‘OpenWrtå›ºä»¶ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹è½½åˆ«äººç¼–è¯‘å¥½çš„å›ºä»¶ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç¼–è¯‘60GBå°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¸Œæœ›ç¼–è¯‘ä¸€ä¸ªå›ºä»¶åº“ï¼Œæƒ³æŠŠæ‰€æœ‰åŠŸèƒ½å…¨éƒ¨é€‰ä¸Šï¼Œ60GBä¸å¤Ÿï¼Œå»ºè®®åˆ†é…128GBå‚¨å­˜ SecureCRTæˆ–PuTTyï¼Œéå¿…é¡»ï¼Œä¸çŸ¥é“å¤§å®¶ç”¨ä»€ä¹ˆå‘½ä»¤è¡Œç»ˆç«¯ï¼Œä½†æ˜¯æˆ‘MacBookå’ŒWindowséƒ½æ˜¯ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œç»ˆç«¯ è·å¾—é•œåƒ å®˜ç½‘ä¸‹è½½ å¯ä»¥ä»OpenWrtçš„å®˜ç½‘ä¸‹è½½é•œåƒ\næœ¬åœ°ç¼–è¯‘ å®˜ç½‘çš„å›ºä»¶æ¯”è¾ƒè½»é‡åŒ–ï¼Œä¸€èˆ¬ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå¥½åœ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥éšæ—¶å®‰è£…è‡ªå·±éœ€è¦çš„åº”ç”¨ã€‚å¦‚æœä¸æƒ³æ¯æ¬¡åˆ·å›ºä»¶éƒ½æŠŠä¹‹å‰å®‰è£…è¿‡çš„åº”ç”¨å†é‡æ–°è£…ä¸€éï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–è¯‘å›ºä»¶äº†ã€‚è¿™ä¸ªä»“åº“ï¼šLeanå…è®¸æˆ‘ä»¬è‡ªå·±é€‰æ‹©åˆé€‚çš„åº”ç”¨ï¼Œå¹¶ä¸”ç¼–è¯‘åˆ°å†…æ ¸ã€‚readmeæœ‰æ¯”è¾ƒè¯¦ç»†çš„ç¼–è¯‘æ­¥éª¤ã€‚å¯ä»¥å…ˆåœ¨æœ¬åœ°ç¼–è¯‘ä¸€æ¬¡ç†Ÿæ‚‰ä¸€ä¸‹ç¼–è¯‘çš„æµç¨‹ï¼Œç„¶åå†ä½¿ç”¨GitHub Actionsç¼–è¯‘ã€‚\nç¬¬ä¸€æ¬¡ç¼–è¯‘ é¦–å…ˆåœ¨Ubuntuä¸Šclone repo\nhttps://github.com/coolsnowwolf/lede.git å®‰è£…ä¾èµ–åŒ…\nsudo apt update -y sudo apt full-upgrade -y sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential \\ bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib \\ git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev \\ libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev \\ libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python3 \\ python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo \\ uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev æ›´æ–°feedå¹¶é€‰æ‹©é…ç½®\ncd lede ./scripts/feeds update -a ./scripts/feeds install -a make menuconfig è¾“å…¥è¿™ä¸ªå‘½ä»¤åå°±å¼€å¯äº†é…ç½®é¡µé¢ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾4Bï¼Œä¸‹é¢æ˜¯è¿™äº›é…ç½®çš„å…·ä½“è¯´æ˜ï¼Œå¯ä»¥æŒ‰éœ€é€‰æ‹©ç¼–è¯‘\n# ç¼–è¯‘çš„ç›®æ ‡ç³»ç»Ÿ TargetSystem: - Broadcom BCM27xx Subtarget: - BCM2711 boards (64 bit) TargetProfile: - Raspberry Pi 4B/400/4CM (64bit) # é•œåƒå‚æ•° TargetImages: - squashfs - KernelPartitionSize: 64 - RootFilesystemPartitionSize: 2048 # LuCIè®¾ç½® LuCI: Collections: - luci # å¼€å¯luci Modules: Translations: - Chinese(zh-cn) # ä¸­æ–‡æ”¯æŒ Themes: - luci-theme-agron # æ·»åŠ ä¸»é¢˜ # LuCIåº”ç”¨ Applications: - luci-app-adguardhome # å»å¹¿å‘Š - luci-app-advanced-reoot - luci-app-alist # æ–‡ä»¶å…±äº«ï¼Œalistç¼–è¯‘æ¯”è¾ƒè€—è´¹æ—¶é—´ï¼Œå®Œå…¨æ²¡å¿…è¦ç¼–è¯‘è¿›å†…æ ¸ï¼Œå¯ä»¥å½“ä½œè½¯ä»¶ä¸‹è½½ - luci-app-aria2 # ä¸‹è½½å·¥å…· - luci-app-cloudflared - luci-app-ddns - luci-app-diskman - luci-app-dockerman # Docker - luci-app-filebrowser # æ–‡ä»¶ç®¡ç† - luci-app-filetransfer - luci-app-firewall # é˜²ç«å¢™ - luci-app-frps - luci-app-frpc # å†…ç½‘ç©¿é€ - luci-app-hd-idle # ç¡¬ç›˜ä¼‘çœ  - luci-app-lucky - luci-app-opkg # è½¯ä»¶åŒ… - luci-app-openvpn - luci-app-openvpn-server - luci-app-passwall ç¿»å¢™ - luci-app-qos # æœåŠ¡è´¨é‡ - luci-app-samba # ç½‘ç»œå…±äº« - luci-app-smartdns\t# ä¼˜åŒ–ç§‘å­¦ä¸Šç½‘ - luci-app-upnp # UPnPæœåŠ¡ - luci-app-usb-printer - luci-app-wol # ç½‘ç»œå”¤é†’ Protocols: - luci-protocol-wireguard # å¯é€‰å·¥å…· BaseSystem: - block-mount # åœ¨LuCIç•Œé¢æ·»åŠ \u003cæŒ‚è½½ç‚¹\u003eèœå• - blockd # è‡ªåŠ¨æŒ‚è½½è®¾å¤‡ - wireless-tools # æ— çº¿æ‰©å±•å·¥å…· Administration: - htop # better top # æ–‡ä»¶ç³»ç»Ÿ KernelModules: Filesystems: - kmod-fs-ext4 - kmod-fs-f2fs - kmod-fs-ntfs - kmod-fs-squashfs - kmod-fs-vfat - kmod-fuse # ç½‘å¡æ”¯æŒ NetworkDevices: - kmod-xxx # æœ‰çº¿ç½‘å¡æ”¯æŒï¼Œè·Ÿä»¥ä¸‹å‡ é¡¹å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§æ·»åŠ  NetworkSupport: - kmod-wireguard WirelessDrivers: - kmod-rt2800-usb # æ·»åŠ Ralink RT5370èŠ¯ç‰‡çš„USBæ— çº¿ç½‘å¡é©±åŠ¨ USBSupport: - kmod-usb-net: - kmod-usb-net-asix # æ·»åŠ æ”¯æŒäºšä¿¡çš„æœ‰çº¿ç½‘å¡æ”¯æŒ - kmod-usb-net-asix-ax88179 # æ·»åŠ USB3.0çš„æœ‰çº¿ç½‘å¡èŠ¯ç‰‡AX88179çš„é©±åŠ¨ - kmod-usb-net-rtl8152 # æ·»åŠ USB2/3çš„æœ‰çº¿ç½‘å¡RTL8152/3èŠ¯ç‰‡æ”¯æŒ - kmod-usb-net-sr9700 # æ·»åŠ USB2.0çš„æœ‰çº¿ç½‘å¡SR9700èŠ¯ç‰‡æ”¯æŒ - kmod-usb-core # å¯ç”¨USBæ”¯æŒ - kmod-usb-hid # USBé”®é¼ æ”¯æŒ - kmod-usb-ohci # æ·»åŠ OHCIæ”¯æŒï¼Œè€USBæ‰éœ€è¦ - kmod-usb-storage # å¯ç”¨USBå­˜å‚¨ - kmod-usb-storage-extras - kmod-usb-uhci # æ·»åŠ UHCIæ”¯æŒï¼Œè€USBæ‰éœ€è¦ - kmod-usb2 # å¼€å¯USB2æ”¯æŒ - kmod-usb3 # å¼€å¯USB3æ”¯æŒ # ç½‘ç»œå·¥å…· Network: DownloadManager: - ariang # Aria2ç®¡ç†é¡µé¢ FileTransfer: - curl # æ·»åŠ curlå‘½ä»¤ - wget-ssl # æ·»åŠ wgetå‘½ä»¤ IP Addresses and Names: - ddns-scripts-cloudflare # ç”¨äºddns - drill\t# DDNS VPN: - wireguard-tools # å®ç”¨å·¥å…· Utilities: Compression: - bsdtar # taræ‰“åŒ…å·¥å…· - gzip # GZ å‹ç¼©å¥—ä»¶ Disc: - fdisk # ç£ç›˜åˆ†åŒºå·¥å…· - lsblk # ç£ç›˜æŸ¥çœ‹å·¥å…· Filesystem: - f2fs-tools - ntfs-3g # NTFSè¯»å†™æ”¯æŒ - resize2fs # åˆ†åŒºå¤§å°è°ƒæ•´ Terminal: - screen # æ·»åŠ screen - losetup - pciutils # æ·»åŠ lspciå‘½ä»¤ - qrencode # wireguard qrcode - usbutils # æ·»åŠ lsusbå‘½ä»¤ ç›®å‰æˆ‘ä½¿ç”¨çš„é…ç½®\nTargetSystem: - Broadcom BCM27xx Subtarget: - BCM2711 boards (64 bit) TargetProfile: - Raspberry Pi 4B/400/4CM (64bit) TargetImages: - squashfs - KernelPartitionSize: 64 - RootFilesystemPartitionSize: 6144 LuCI: Themes: - luci-theme-agron Applications: - luci-app-accesscontrol - luci-app-adguardhome - luci-app-advanced-reoot - luci-app-arpbind - luci-app-ddns - luci-app-diskman - luci-app-filetransfer - luci-app-firewall - luci-app-frpc - luci-app-nlbwmon - luci-app-opkg - luci-app-samba - luci-app-sqm - luci-app-statistics - luci-app-upnp Protocols: - luci-protocol-wireguard Network: IP Addresses and Names: - ddns-scripts-cloudflare - drill - tcpdump Utilities: - qrencode å…³äºTarget Imagesï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š\nå¦‚æœä½ å¸Œæœ›ç›´æ¥è¿è¡Œåœ¨ç‰©ç†ä¸»æœºï¼Œæ¯”å¦‚æ ‘è“æ´¾ç›´æ¥åœ¨SDå¡åˆ·å›ºä»¶ï¼Œä½¿ç”¨squashfs å¦‚æœä½ æƒ³æŠŠOpenWrtæ‰“åŒ…æˆDockeré•œåƒï¼Œé€‰æ‹©tar.gz å¦‚æœä½ æƒ³æŠŠä¸»ç³»ç»Ÿè®¾ç½®ä¸ºPVEè™šæ‹Ÿæœºï¼ŒOpenWrtä½œä¸ºè™šæ‹Ÿæœºçš„ä¸€ä¸ªç³»ç»Ÿè¿è¡Œåœ¨MiniPCä¸Šï¼Œè¯¦è§ï¼šx86 Mini PCå®‰è£…PVE | Kunyangâ€™s Blog å¦‚æœä½ æš‚æ—¶è¿˜æ²¡å†³å®šå°†æ¥è¦æ€ä¹ˆéƒ¨ç½²ï¼Œå¯ä»¥å…ˆéƒ½é€‰äº† ä¸åŒçš„æ¶æ„çš„å¯é€‰é¡¹æ˜¯ä¸ä¸€æ ·çš„ RootFilesystemPartitionSizeæ˜¯å®‰è£…ä¹‹åçš„ç³»ç»Ÿå¤§å°ï¼Œæˆ‘æ ‘è“æ´¾çš„SDå¡ä¸º8Gå› æ­¤é€‰æ‹©äº†6144Mï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨PVEçš„è¯è¿™é‡Œå°±ä¸éœ€è¦çº ç»“äº†ï¼Œå¯ä»¥åœ¨PVEä¸Šåˆ†é…ç¡¬ç›˜çš„å¤§å° é…ç½®å®Œæˆåé€‰æ‹©Saveï¼Œä¼šä¿å­˜ä¸ºä¸€ä¸ª.configæ–‡ä»¶ã€‚åœ¨æœ€åä¸€æ­¥å®‰è£…ä¹‹å‰è¿˜éœ€è¦å®‰è£…screenï¼Œç”¨äºåˆ›å»ºæŒä¹…ä¼šè¯ï¼Œå¦åˆ™å¦‚æœä¸å°å¿ƒå…³äº†sshä¹‹å‰ç¼–è¯‘çš„å°±éƒ½æ²¡äº†ï¼ˆä½ çŒœæˆ‘æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼‰\nsudo apt install screen screen -S buildlede æœ€åæ‰§è¡Œå‘½ä»¤ç”¨8ä¸ªçº¿ç¨‹ä¸‹è½½dlåº“ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘ç”¨1ä¸ªçº¿ç¨‹ç¼–è¯‘ã€‚åœ¨è¿™é‡Œä¸€å¼€å§‹æˆ‘ç”¨çš„AWSçš„Ubuntuä¸€ç›´ä¸‹ä¸ä¸‹æ¥ï¼Œæ²¡æœ‰åŠæ³•æ¢æˆäº†æœ¬åœ°çš„Ubuntuè™šæ‹Ÿæœºæ‰ä¸‹è½½ç¼–è¯‘æˆåŠŸ\nmake download -j8 make V=s -j1 ç„¶åå°±æ˜¯ç­‰å¾…ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆååœ¨bin\\targetså¯ä»¥é€‰æ‹©openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gzè¿™ä¸ªç‰ˆæœ¬è¿›è¡Œçƒ§å½•\nå•ç‹¬ç¼–è¯‘ æœ‰æ—¶å€™ç”¨ç€ç”¨ç€å‘ç°æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å•ç‹¬ç¼–è¯‘ä¸€ä¸ªæ’ä»¶\nç¼–è¾‘.configæ–‡ä»¶\nmake menuconfig æ‰¾åˆ°æˆ‘ä»¬æƒ³å•ç‹¬ç¼–è¯‘çš„æ’ä»¶ï¼Œæ¯”å¦‚luci-app-diskmanï¼Œè¿™æ˜¯ä¸ªç®¡ç†è·¯ç”±å™¨ä¸Šçš„ç£ç›˜å’Œåˆ†åŒºçš„æ’ä»¶ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘é€‰æ‹©ä¸º[*]ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªå†…ç½®æ¨¡å—ç¼–è¯‘ï¼Œä¸å¯ä»¥å¸è½½ã€‚è¿™æ¬¡çš„è¯æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸º[M]ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—ç¼–è¯‘\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥ç¼–è¯‘\nmake package/luci-app-diskman/compile V=s xxxxxxxxxxÂ route add 192.168.2.0 MASK 255.255.255.0 192.168.100.1 METRIC 1bash\næ‰“å¼€openwrtï¼ŒSystem â†’ File Transferé€‰æ‹©æ–‡ä»¶ä¸Šä¼ ï¼Œå³ä¸‹è§’å®‰è£…å°±å¯ä»¥äº†\næˆ‘å®‰è£…å®ŒåOpenWrtæ²¡æœ‰ç«‹åˆ»å‡ºç°æ–°å®‰è£…çš„æ’ä»¶ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´æ‰å‡ºç°çš„\nå¦‚æœè¦å•ç‹¬ç¼–è¯‘å†…æ ¸æ¨¡å—ï¼Œæ¯”å¦‚kmod-wireguardï¼Œå¯ä»¥åœ¨kernel moduleä¸­é€‰ä¸­å®ƒä¸º[M]ï¼Œç„¶åè¿è¡Œ\nmake package/kernel/linux/compile V=s å¾ˆå¿«ç¼–è¯‘å°±å®Œæˆäº†ï¼Œç¼–è¯‘å‡ºæ¥çš„åŒ…åœ¨bin/packages///kmod-wireguard_xxx.ipk\nç¬¬äºŒæ¬¡ç¼–è¯‘ æ‹‰å–æœ€æ–°feeds\nsudo sh -c \"apt update \u0026\u0026 apt upgrade -y\" git pull ./scripts/feeds update -a \u0026\u0026 ./scripts/feeds install -a æ¸…é™¤æ—§çš„ç¼–è¯‘äº§ç‰©ï¼ˆå¯é€‰ï¼‰\nmake clean # æºç æœ‰å¤§è§„æ¨¡æ›´æ–°æˆ–è€…å†…æ ¸æ›´æ–°åæ‰§è¡Œï¼Œä»¥ä¿è¯ç¼–è¯‘è´¨é‡ # æ­¤æ“ä½œä¼šåˆ é™¤ /bin å’Œ /build_dir ç›®å½•ä¸­çš„æ–‡ä»¶ make dirclean # å¦‚æœè¦æ›´æ¢æ¶æ„ï¼Œä¾‹å¦‚è¦ä» x86_64 æ¢åˆ° MediaTek Ralink MIPS å»ºè®®æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·±åº¦æ¸…ç† # æ­¤æ“ä½œä¼šåˆ é™¤ /bin å’Œ /build_dir ç›®å½•çš„ä¸­çš„æ–‡ä»¶ï¼ˆmake cleanï¼‰ï¼Œä»¥åŠ /staging_dirã€/toolchainã€/tmp å’Œ /logs ä¸­çš„æ–‡ä»¶ ç¼–è¯‘\nmake defconfig make download -j8 find dl -size -1024c -exec ls -l {} \\; make -j$(nproc) || make -j1 || make -j1 V=s GitHub Actionsç¼–è¯‘ ç†Ÿæ‚‰äº†æœ¬åœ°ç¼–è¯‘çš„æµç¨‹ä¹‹åå°±æ¨èä½¿ç”¨GitHub Actionsè¿›è¡Œç¼–è¯‘äº†ï¼Œè¿™æ ·å¯ä»¥æŠŠè„æ´»ç´¯æ´»å…¨éƒ¨äº¤ç»™äº‘ï¼Œæœ¬æ¥æƒ³è‡ªå·±å†™Workflowçš„yamlï¼Œä½†æ˜¯æ‰¾åˆ°äº†è¿™ä¸ªä»“åº“ï¼Œå†³å®šè¿˜æ˜¯ä¸é‡å¤é€ è½®å­äº†å“ˆå“ˆå“ˆã€‚\næ³¨æ„å¦‚æœå¸Œæœ›è‡ªåŠ¨å°†Artifactå‘å¸ƒåˆ°Releaseçš„è¯ï¼Œéœ€è¦èµ‹äºˆPATæƒé™ï¼Œåœ¨Settings â†’ Developer Settings â†’ Personal access tokens â†’ Tokens (classic) â†’ ä½ çš„Tokenï¼Œå‹¾é€‰workflowå’Œwrite:packages\nçƒ§å½• ç›´æ¥çƒ§å½•çš„imageæˆ‘ä»¬é€‰æ‹©openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz\nWindows å¯ä»¥ä½¿ç”¨Balena Etcheræˆ–è€…å…¶ä»–çš„disk imagerè½¯ä»¶å°†imageçƒ§å½•åˆ°SDå¡ä¸­ï¼Œéå¸¸ç®€å•ï¼ŒæŒ‰é¡ºåºä¸€æ­¥ä¸€æ­¥æ¥å³å¯\nMacOS MacOSä¹Ÿå¯ä»¥ä½¿ç”¨Balena Etcherå°†é•œåƒå¯¼å…¥åˆ°SDå¡ä¸­ï¼Œå¦‚æœä¸æƒ³ä¸‹è½½è½¯ä»¶ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œä¹Ÿæ˜¯å¯ä»¥çš„\næ‰¾åˆ°SDå¡çš„ç£ç›˜ç¼–å·ï¼Œè¿™é‡Œæˆ‘çš„SDå¡ç£ç›˜ä¸º/dev/disk4\ndiskutil list /dev/disk4 (external, physical): #: TYPE NAME SIZE IDENTIFIER 0: FDisk_partition_scheme *7.9 GB disk4 1: Windows_FAT_32 BOOT 67.1 MB disk4s1 2: Linux 109.1 MB disk4s2 (free space) 7.7 GB - ç”±äºæˆ‘è¿™é‡Œä»¥å‰è£…è¿‡ä¸€ä¸ªä¸å¸¦GUIç‰ˆæœ¬çš„OpenWrtï¼ŒSDå¡å¤šäº†å‡ ä¸ªåˆ†åŒºï¼Œè¿™æ¬¡æ‰“ç®—é‡æ–°è£…ä¸€ä¸ªå¸¦ç€GUIçš„\né¦–å…ˆæ¢å¤åˆ†åŒºï¼Œè¿™ä¸ªå‘½ä»¤åŒæ—¶æŠŠSDå¡è¿›è¡Œæ ¼å¼åŒ–\ndiskutil eraseDisk FAT32 SDCARD MBRFormat /dev/disk4 æ¢å¤åˆ†åŒºä¹‹å\ndiskutil list /dev/disk4 (external, physical): #: TYPE NAME SIZE IDENTIFIER 0: FDisk_partition_scheme *7.9 GB disk4 1: DOS_FAT_32 SDCARD 7.9 GB disk4s1 è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¸è½½ï¼ˆä½†ä¸ç§»é™¤ï¼‰ SD å¡ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºbusy\ndiskutil unmountDisk /dev/disk4 è§£å‹ä¸‹è½½çš„image\ngunzip ./openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz ä½¿ç”¨ dd å†™å…¥è§£å‹åçš„ .img æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸€æ­¥åƒä¸‡ä¸è¦æŠ„é”™äº†ç£ç›˜ç¼–å·ï¼Œå¦åˆ™ä¼¤å®³ä¸å¯é€†ï¼Œddæ˜¯ä¸ªå¾ˆå¼ºçš„å‘½ä»¤\nsudo dd if=/Users/xxx/Desktop/openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img of=/dev/disk4 bs=1M status=progress å¦‚æœä¸æŠ¥é”™ä¸€èˆ¬å°±æ˜¯æˆåŠŸäº†\næœ€åå°†SDå¡ä»ç”µè„‘æ‹”å‡ºï¼Œæ’åˆ°æ ‘è“æ´¾ä¸Šï¼Œå¯åŠ¨æ ‘è“æ´¾ï¼Œè¿™æ—¶ä½¿ç”¨ç½‘çº¿å°†æ ‘è“æ´¾çš„ä»¥å¤ªç½‘æ¥å£å’Œç”µè„‘çš„ä»¥å¤ªç½‘æ¥å£ç›¸è¿ã€‚ç”±äºOpenWrt é»˜è®¤å°†æ ‘è“æ´¾çš„eth0æ¥å£æ¡¥æ¥åˆ°br-lanå¹¶ä½¿ç”¨ IP åœ°å€ 192.168.1.1ï¼Œæˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹ç”µè„‘ç«¯çš„Ethernetæ¥å£æ˜¯å¦ä¹Ÿåœ¨192.168.1.xçš„å­ç½‘ï¼Œxå¯ä»¥é€‰2 - 255çš„éšä¾¿ä¸€ä¸ªæ•°\nå½“æ ‘è“æ´¾å°±è·Ÿç”µè„‘åœ¨ç›¸åŒå­ç½‘åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥192.168.1.1ï¼Œå°±èƒ½ç™»å½•åˆ°OpenWrtçš„GUIï¼ˆLuCIï¼‰äº†ï¼Œé»˜è®¤ç”¨æˆ·åå’Œå¯†ç æ˜¯rootå’Œpassword\nå¤§åŠŸå‘Šæˆäº†\nä½¿ç”¨Dockerå®¹å™¨ è¯¦è§ï¼šå°†OpenWrtåˆ¶ä½œä¸ºDockeré•œåƒ | Kunyangâ€™s Blog\nè¿æ¥è·¯ç”±å™¨ æˆ‘å®¶ä¸»è·¯ç”±å™¨ä½¿ç”¨çš„å­ç½‘ä¸º192.168.2.xï¼Œéœ€è¦å°†æ ‘è“æ´¾æ”¹ä¸ºè¿™ä¸ªå­ç½‘ä¸‹ï¼ˆå½“ç„¶å¦‚æœä¸»è·¯ç”±å™¨å­ç½‘ä¸º192.168.1.xçš„è¯å°±ä¸ç”¨å¤šæŠ˜è…¾è¿™ä¸€æ­¥äº†ï¼‰ã€‚æˆ‘ä»¬å…ˆç¦ç”¨æ¡¥æ¥æ¨¡å¼å’Œä¿®æ”¹IPåœ°å€\nvi /etc/config/network ä¿®æ”¹æ–‡ä»¶ä¸º\nconfig interface 'lan' option device 'eth0' option proto 'static' option ipaddr '192.168.2.66' option netmask '255.255.255.0' option gateway '192.168.2.1' option dns '192.168.2.1' ç¦ç”¨DHCPï¼Œé˜²æ­¢è·Ÿä¸»è·¯ç”±å™¨çš„DHCPå†²çª\nvi /etc/config/dhcp config dhcp 'lan' option interface 'lan' option ignore '1' æ£€æŸ¥é˜²ç«å¢™é…ç½®\nvi /etc/config/firewall config zone option name 'lan' list network 'lan' option input 'ACCEPT' option output 'ACCEPT' option forward 'ACCEPT' åº”ç”¨è®¾ç½®\n/etc/init.d/network restart è¿™æ—¶ç”±äºæˆ‘ä»¬ç”µè„‘è¿˜åœ¨192.168.1.xå­ç½‘ï¼Œä½†æ˜¯æ ‘è“æ´¾å·²ç»åˆ°äº†192.168.2.xå­ç½‘äº†ï¼Œæ‰€ä»¥è¿æ¥å¿…å®šæ˜¯æ–­å¼€çš„ï¼Œæˆ‘ä»¬å†æŠŠç”µè„‘ç«¯çš„Ethernetç«¯å£æ”¹å›192.168.2.xå­ç½‘ï¼Œå°±åˆèƒ½é‡æ–°è®¿é—®äº†\nå°†æ ‘è“æ´¾ä¸ç”µè„‘æ–­å¼€è¿æ¥ï¼Œæ’åˆ°è·¯ç”±å™¨çš„LANå£ä¸Šï¼Œåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œï¼Œè€Œä¸”ç”µè„‘ä¹Ÿèƒ½è®¿é—®æ ‘è“æ´¾äº†\nè®¾ç½®æ—è·¯ç”± ä»¥ä¸Šæ­¥éª¤åªæ˜¯å°†æ ‘è“æ´¾ä½œä¸ºä¸€ä¸ªç”¨ç½‘è®¾å¤‡åŠ å…¥äº†å®¶åº­çš„å±€åŸŸç½‘ï¼Œæˆ‘ä»¬çš„ç»ˆç«¯è®¾å¤‡è¿˜æ˜¯æ²¿ç€ä¸»è·¯ç”±è¿™æ¡çº¿è¿›è¡Œé€šä¿¡ï¼Œè¦æƒ³ä½œä¸ºæ—è·¯ç”±è¿˜éœ€è¦è¿›ä¸€æ­¥è®¾ç½®\nå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†Wifiçš„ç½‘å…³ä»è·¯ç”±å™¨ä¹‹å‰DHCPè‡ªåŠ¨åˆ†é…çš„åœ°å€æ”¹ä¸ºæ—è·¯ç”±æ ‘è“æ´¾å³å¯ï¼Œå‡è®¾æˆ‘çš„ä¸»è·¯ç”±å™¨IPåœ°å€ä¸º192.168.2.1ï¼Œæˆ‘çš„ç”µè„‘IPåœ°å€ä¸º192.168.2.54ï¼Œæˆ‘çš„æ ‘è“æ´¾çš„IPåœ°å€ä¸º192.168.2.66ï¼Œæˆ‘éœ€è¦è¿™ä¹ˆä¿®æ”¹ï¼š\nMacBookä¹Ÿä¸€æ ·\nåŒæ ·çš„iPhoneä¹Ÿå¯ä»¥è®¾ç½®ï¼Œè¿™é‡Œæˆ‘å°±ä¸æ”¾å›¾äº†\nå› ä¸ºæ€•ç‚¸ç½‘æˆ‘æš‚æ—¶å…ˆä½¿ç”¨è¿™ç§éä¾µå…¥å¼çš„è®¾ç½®ï¼Œå®ƒåªå½±å“æŠŠç½‘å…³è®¾ç½®ä¸ºè½¯è·¯ç”±çš„ç»ˆç«¯ï¼Œè¿™æ ·ä¸€æ—¦ç½‘åäº†åªå½±å“éƒ¨åˆ†è®¾å¤‡ï¼Œæˆ–è€…æˆ‘ä¿®æ”¹ä¸€ä¸‹ç½‘å…³ä¿®æ”¹åˆ°ä¸»è·¯ç”±å™¨çš„IPåœ°å€å°±å¯ä»¥äº†\næ•™ç¨‹è¯¦è§ï¼š\nå®‰è£…æ’ä»¶ å¸è½½æ’ä»¶ å¯ä»¥åœ¨System â†’ Software â†’ Installedä¸­å¸è½½æ’ä»¶ æ³¨æ„ç›´æ¥ç¼–è¯‘è¿›å†…æ ¸å›ºä»¶çš„æ’ä»¶æ— æ³•å¸è½½ å®‰è£…æ’ä»¶ ç›´æ¥å®‰è£… å›½å¤–æºArm\nsrc/gz openwrt_core https://downloads.openwrt.org/releases/23.05.0/targets/bcm27xx/bcm2711/packages src/gz openwrt_base https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/base src/gz openwrt_luci https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/luci src/gz openwrt_packages https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/packages src/gz openwrt_routing https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/routing src/gz openwrt_telephony https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/telephony å›½å¤–æºx86\nsrc/gz openwrt_core https://downloads.openwrt.org/releases/23.05.0/targets/x86/64/packages src/gz openwrt_base https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/base src/gz openwrt_luci https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/luci src/gz openwrt_packages https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/packages src/gz openwrt_routing https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/routing src/gz openwrt_telephony https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/telephony å›½å†…æº Arm\nsrc/gz openwrt_core https://mirrors.tencent.com/lede/snapshots/targets/bcm27xx/bcm2711/packages src/gz openwrt_base https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/base src/gz openwrt_luci https://mirrors.tencent.com/lede/releases/18.06.9/packages/aarch64_cortex-a72/luci src/gz openwrt_packages https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/packages src/gz openwrt_routing https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/routing src/gz openwrt_telephony https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/telephony å›½å†…æºx86\nsrc/gz openwrt_core https://mirrors.tencent.com/lede/releases/24.10.0-rc1/targets/x86/64/packages src/gz openwrt_base https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/base src/gz openwrt_helloworld https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/helloworld src/gz openwrt_luci https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/luci src/gz openwrt_packages https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/packages src/gz openwrt_routing https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/routing src/gz openwrt_telephony https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/telephony è‡ªå·±ç¼–è¯‘ é¦–å…ˆéœ€è¦åœ¨Ubuntuä¸Šç¼–è¯‘æ’ä»¶\nmake menuconfig åœ¨LuCI â†’ Applicationså¯ä»¥æŠŠå›ºä»¶å…¨é€‰ä¸Šï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ˜¯åšä¸ªå›ºä»¶åº“ï¼Œä¹‹åæœ‰å•¥éœ€æ±‚å°±è£…å•¥ã€‚é€‰æ‹©æ—¶åº”è¯¥æ¨¡å—åŒ–ï¼ŒæŒ‰ç©ºæ ¼è®©å‰é¢æ‹¬å·é‡Œå‡ºç°ä¸€ä¸ªMã€‚ä¿å­˜åå›åˆ°å‘½ä»¤è¡Œå¼€å§‹ç¼–è¯‘\nmake -j1 V=s ç¼–è¯‘å®Œæˆååœ¨bin\\packagesä¸­å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬ç¼–è¯‘çš„å…¨éƒ¨æ’ä»¶äº†ï¼Œè€Œä¸”éƒ½ä¸º.ipkæ ¼å¼\nå¸¸è§ä½¿ç”¨åœºæ™¯ DDNS è¯¦è§ï¼šOpenWrté…ç½®DDNS | Kunyangâ€™s Blog å»å¹¿å‘Š æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰ luci-app-adguardhome é…ç½®å‚è€ƒï¼š\n\u003c!DOCTYPE HTML\u003e\rå¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº Wireguard Wireguardå› ä¸ºæ¯”OpenVPNè½»é‡åŒ–é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤ç›®å‰æ˜¯æˆ‘çš„é¦–é€‰ é…ç½®å‚è€ƒï¼šOpenWrté…ç½®Wireguard | Kunyangâ€™s Blog ZeroTire æ‰€éœ€æ’ä»¶ luci-app-zerotire é…ç½®å‚è€ƒï¼š\n\u003c!DOCTYPE HTML\u003e\rOpenVPN æ‰€éœ€æ’ä»¶ luci-app-openvpn luci-app-openvpn-server luci-i18n-openvpn-server-zh-cn luci-i18n-openvpn-zh-cn open-vpn-easy-rsa openvpn-openssl æ–‡ä»¶ç®¡ç† æ–‡ä»¶ç®¡ç†å™¨ luci-app-filebrowser luci-app-filetransfer luci-app-samba é…ç½®å‚è€ƒï¼š\n\u003c!DOCTYPE HTML\u003e\räº‘ç›˜ç®¡ç†å™¨ï¼Œæ³¨æ„alistå¼ºçƒˆä¸å»ºè®®é€‰ä¸Šç¼–è¯‘ï¼Œä¼šå¯¼è‡´ç¼–è¯‘äº§ç‰©ç‰¹åˆ«å¤§ luci-app-alist luci-app-cloudflared é…ç½®å‚è€ƒï¼šé…ç½®AList | Kunyangâ€™s Blog ",
  "wordCount" : "4817",
  "inLanguage": "zh",
  "datePublished": "2024-11-11T13:13:13-04:00",
  "dateModified": "2024-12-27T21:01:52-05:00",
  "author":{
    "@type": "Person",
    "name": "Kyxie"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kunyang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kyxie.me/Favicon.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kyxie.me/zh/" accesskey="h" title="Home (Alt + H)">Home</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://kyxie.me/en/" title="EnglishğŸ‡¨ğŸ‡¦"
                            aria-label="EnglishğŸ‡¨ğŸ‡¦">EnglishğŸ‡¨ğŸ‡¦</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kyxie.me/zh/comment/comments" title="ç•™è¨€æ¿ğŸ“‹">
                    <span>ç•™è¨€æ¿ğŸ“‹</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kyxie.me/zh/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/">åšå®¢ ğŸ“’</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/tech/">æŠ€æœ¯ ğŸ”§</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/tech/router/">è·¯ç”± ğŸ›œ</a></div>
    <h1 class="post-title">
      æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±
    </h1>
    <div class="post-meta">


<span title='2024-11-11 13:13:13 -0400 -0400'>2024-11-11</span>&nbsp;Â·&nbsp;10 åˆ†é’Ÿ&nbsp;Â·&nbsp;4817 å­—&nbsp;Â·&nbsp;Kyxie&nbsp;|&nbsp;
<ul class="i18n_list">è¯­è¨€:
    <li>
        <a href="https://kyxie.me/en/blog/tech/router/raspberrypi-openwrt/">EnglishğŸ‡¨ğŸ‡¦</a>
    </li>
</ul>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
        <div class="toc">
            <details  open>
                <summary accesskey="c" title="(Alt + C)">
                    <span class="details">ç›®å½•</span>
                </summary>

                <div class="inner"><ul>
                        <li>
                            <a href="#%e9%9c%80%e8%a6%81%e7%9a%84%e7%a1%ac%e4%bb%b6%e5%92%8c%e8%bd%af%e4%bb%b6" aria-label="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶</a><ul>
                                    
                        <li>
                            <a href="#%e7%a1%ac%e4%bb%b6" aria-label="ç¡¬ä»¶">ç¡¬ä»¶</a></li>
                        <li>
                            <a href="#%e8%bd%af%e4%bb%b6" aria-label="è½¯ä»¶">è½¯ä»¶</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e8%8e%b7%e5%be%97%e9%95%9c%e5%83%8f" aria-label="è·å¾—é•œåƒ">è·å¾—é•œåƒ</a><ul>
                                    
                        <li>
                            <a href="#%e5%ae%98%e7%bd%91%e4%b8%8b%e8%bd%bd" aria-label="å®˜ç½‘ä¸‹è½½">å®˜ç½‘ä¸‹è½½</a></li>
                        <li>
                            <a href="#%e6%9c%ac%e5%9c%b0%e7%bc%96%e8%af%91" aria-label="æœ¬åœ°ç¼–è¯‘">æœ¬åœ°ç¼–è¯‘</a><ul>
                                    
                        <li>
                            <a href="#%e7%ac%ac%e4%b8%80%e6%ac%a1%e7%bc%96%e8%af%91" aria-label="ç¬¬ä¸€æ¬¡ç¼–è¯‘">ç¬¬ä¸€æ¬¡ç¼–è¯‘</a></li>
                        <li>
                            <a href="#%e5%8d%95%e7%8b%ac%e7%bc%96%e8%af%91" aria-label="å•ç‹¬ç¼–è¯‘">å•ç‹¬ç¼–è¯‘</a></li>
                        <li>
                            <a href="#%e7%ac%ac%e4%ba%8c%e6%ac%a1%e7%bc%96%e8%af%91" aria-label="ç¬¬äºŒæ¬¡ç¼–è¯‘">ç¬¬äºŒæ¬¡ç¼–è¯‘</a></li></ul>
                        </li>
                        <li>
                            <a href="#github-actions%e7%bc%96%e8%af%91" aria-label="GitHub Actionsç¼–è¯‘">GitHub Actionsç¼–è¯‘</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e7%83%a7%e5%bd%95" aria-label="çƒ§å½•">çƒ§å½•</a><ul>
                                    
                        <li>
                            <a href="#windows" aria-label="Windows">Windows</a></li>
                        <li>
                            <a href="#macos" aria-label="MacOS">MacOS</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e4%bd%bf%e7%94%a8docker%e5%ae%b9%e5%99%a8" aria-label="ä½¿ç”¨Dockerå®¹å™¨">ä½¿ç”¨Dockerå®¹å™¨</a></li>
                        <li>
                            <a href="#%e8%bf%9e%e6%8e%a5%e8%b7%af%e7%94%b1%e5%99%a8" aria-label="è¿æ¥è·¯ç”±å™¨">è¿æ¥è·¯ç”±å™¨</a></li>
                        <li>
                            <a href="#%e8%ae%be%e7%bd%ae%e6%97%81%e8%b7%af%e7%94%b1" aria-label="è®¾ç½®æ—è·¯ç”±">è®¾ç½®æ—è·¯ç”±</a></li>
                        <li>
                            <a href="#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6" aria-label="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a><ul>
                                    
                        <li>
                            <a href="#%e5%8d%b8%e8%bd%bd%e6%8f%92%e4%bb%b6" aria-label="å¸è½½æ’ä»¶">å¸è½½æ’ä»¶</a></li>
                        <li>
                            <a href="#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6-1" aria-label="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a><ul>
                                    
                        <li>
                            <a href="#%e7%9b%b4%e6%8e%a5%e5%ae%89%e8%a3%85" aria-label="ç›´æ¥å®‰è£…">ç›´æ¥å®‰è£…</a></li>
                        <li>
                            <a href="#%e8%87%aa%e5%b7%b1%e7%bc%96%e8%af%91" aria-label="è‡ªå·±ç¼–è¯‘">è‡ªå·±ç¼–è¯‘</a></li></ul>
                        </li></ul>
                        </li>
                        <li>
                            <a href="#%e5%b8%b8%e8%a7%81%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="å¸¸è§ä½¿ç”¨åœºæ™¯">å¸¸è§ä½¿ç”¨åœºæ™¯</a><ul>
                                    
                        <li>
                            <a href="#ddns" aria-label="DDNS">DDNS</a></li>
                        <li>
                            <a href="#%e5%8e%bb%e5%b9%bf%e5%91%8a" aria-label="å»å¹¿å‘Š">å»å¹¿å‘Š</a></li>
                        <li>
                            <a href="#%e5%a4%96%e7%bd%91%e8%ae%bf%e9%97%ae%e6%88%91%e7%9a%84windows%e5%8f%b0%e5%bc%8f%e6%9c%ba" aria-label="å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº">å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº</a><ul>
                                    
                        <li>
                            <a href="#wireguard" aria-label="Wireguard">Wireguard</a></li>
                        <li>
                            <a href="#zerotire" aria-label="ZeroTire">ZeroTire</a></li>
                        <li>
                            <a href="#openvpn" aria-label="OpenVPN">OpenVPN</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" aria-label="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†</a>
                        </li>
                    </ul>
                    </li>
                    </ul>
                </div>
            </details>
        </div>
    </aside>
    <script>
        let activeElement;
        let elements;
        window.addEventListener('DOMContentLoaded', function (event) {
            checkTocPosition();

            elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }, false);

        window.addEventListener('resize', function (event) {
            checkTocPosition();
        }, false);

        window.addEventListener('scroll', () => {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement) {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }, false);

        const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
        const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
        const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

        function checkTocPosition() {
            const width = document.body.scrollWidth;

            if (width - main - (toc * 2) - (gap * 4) > 0) {
                document.getElementById("toc-container").classList.add("wide");
            } else {
                document.getElementById("toc-container").classList.remove("wide");
            }
        }

        function getOffsetTop(element) {
            if (!element.getClientRects().length) {
                return 0;
            }
            let rect = element.getBoundingClientRect();
            let win = element.ownerDocument.defaultView;
            return rect.top + win.pageYOffset;
        }
    </script>
  <div class="post-content"><h3 id="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶<a hidden class="anchor" aria-hidden="true" href="#éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">#</a></h3>
<h4 id="ç¡¬ä»¶">ç¡¬ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç¡¬ä»¶">#</a></h4>
<ul>
<li>ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘</li>
<li>å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+</li>
<li>8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š</li>
<li>SDå¡çš„è¯»å¡å™¨</li>
<li>ä¸€æ ¹ç½‘çº¿</li>
<li>æ˜¾ç¤ºå™¨ï¼ˆéå¿…é¡»ï¼‰ï¼ŒMicro USB - HDMIçº¿ï¼ˆéå¿…é¡»ï¼‰</li>
</ul>
<h4 id="è½¯ä»¶">è½¯ä»¶<a hidden class="anchor" aria-hidden="true" href="#è½¯ä»¶">#</a></h4>
<ul>
<li><a href="https://etcher.balena.io/#download-etcher">Balena Etcher</a>ï¼ŒMacBookç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸‹è½½è¿™ä¸ªï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨å‘½ä»¤è¡Œä»£æ›¿</li>
<li>VM Virtual Boxå’ŒUbuntuè™šæ‹Ÿæœºï¼Œéå¿…é¡»ï¼Œç”¨äºç¼–è¯‘OpenWrtå›ºä»¶ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹è½½åˆ«äººç¼–è¯‘å¥½çš„å›ºä»¶ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç¼–è¯‘60GBå°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¸Œæœ›ç¼–è¯‘ä¸€ä¸ªå›ºä»¶åº“ï¼Œæƒ³æŠŠæ‰€æœ‰åŠŸèƒ½å…¨éƒ¨é€‰ä¸Šï¼Œ60GBä¸å¤Ÿï¼Œå»ºè®®åˆ†é…128GBå‚¨å­˜</li>
<li>SecureCRTæˆ–PuTTyï¼Œéå¿…é¡»ï¼Œä¸çŸ¥é“å¤§å®¶ç”¨ä»€ä¹ˆå‘½ä»¤è¡Œç»ˆç«¯ï¼Œä½†æ˜¯æˆ‘MacBookå’ŒWindowséƒ½æ˜¯ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œç»ˆç«¯</li>
</ul>
<h3 id="è·å¾—é•œåƒ">è·å¾—é•œåƒ<a hidden class="anchor" aria-hidden="true" href="#è·å¾—é•œåƒ">#</a></h3>
<h4 id="å®˜ç½‘ä¸‹è½½">å®˜ç½‘ä¸‹è½½<a hidden class="anchor" aria-hidden="true" href="#å®˜ç½‘ä¸‹è½½">#</a></h4>
<p>å¯ä»¥ä»OpenWrtçš„<a href="https://openwrt.org/toh/views/toh_fwdownload">å®˜ç½‘</a>ä¸‹è½½é•œåƒ</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/a2f4260c7818d9c1b8c826a37f6aab0b.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="OpenWrt Images"  />
</p>
<h4 id="æœ¬åœ°ç¼–è¯‘">æœ¬åœ°ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#æœ¬åœ°ç¼–è¯‘">#</a></h4>
<p>å®˜ç½‘çš„å›ºä»¶æ¯”è¾ƒè½»é‡åŒ–ï¼Œä¸€èˆ¬ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå¥½åœ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥éšæ—¶å®‰è£…è‡ªå·±éœ€è¦çš„åº”ç”¨ã€‚å¦‚æœä¸æƒ³æ¯æ¬¡åˆ·å›ºä»¶éƒ½æŠŠä¹‹å‰å®‰è£…è¿‡çš„åº”ç”¨å†é‡æ–°è£…ä¸€éï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–è¯‘å›ºä»¶äº†ã€‚è¿™ä¸ªä»“åº“ï¼š<a href="https://github.com/coolsnowwolf/lede">Lean</a>å…è®¸æˆ‘ä»¬è‡ªå·±é€‰æ‹©åˆé€‚çš„åº”ç”¨ï¼Œå¹¶ä¸”ç¼–è¯‘åˆ°å†…æ ¸ã€‚readmeæœ‰æ¯”è¾ƒè¯¦ç»†çš„ç¼–è¯‘æ­¥éª¤ã€‚å¯ä»¥å…ˆåœ¨æœ¬åœ°ç¼–è¯‘ä¸€æ¬¡ç†Ÿæ‚‰ä¸€ä¸‹ç¼–è¯‘çš„æµç¨‹ï¼Œç„¶åå†ä½¿ç”¨GitHub Actionsç¼–è¯‘ã€‚</p>
<h5 id="ç¬¬ä¸€æ¬¡ç¼–è¯‘">ç¬¬ä¸€æ¬¡ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ¬¡ç¼–è¯‘">#</a></h5>
<ul>
<li>
<p>é¦–å…ˆåœ¨Ubuntuä¸Šclone repo</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>https://github.com/coolsnowwolf/lede.git
</span></span></code></pre></div></li>
<li>
<p>å®‰è£…ä¾èµ–åŒ…</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update -y
</span></span><span style="display:flex;"><span>sudo apt full-upgrade -y
</span></span><span style="display:flex;"><span>sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python3 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev
</span></span></code></pre></div></li>
<li>
<p>æ›´æ–°feedå¹¶é€‰æ‹©é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd lede
</span></span><span style="display:flex;"><span>./scripts/feeds update -a
</span></span><span style="display:flex;"><span>./scripts/feeds install -a
</span></span><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div></li>
<li>
<p><a id="menuconfig"></a>è¾“å…¥è¿™ä¸ªå‘½ä»¤åå°±å¼€å¯äº†é…ç½®é¡µé¢ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾4Bï¼Œä¸‹é¢æ˜¯è¿™äº›é…ç½®çš„å…·ä½“è¯´æ˜ï¼Œå¯ä»¥æŒ‰éœ€é€‰æ‹©ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># ç¼–è¯‘çš„ç›®æ ‡ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetSystem</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Broadcom BCM27xx</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Subtarget</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">BCM2711 boards (64 bit)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetProfile</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Raspberry Pi 4B/400/4CM (64bit)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é•œåƒå‚æ•°</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetImages</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">squashfs</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">KernelPartitionSize</span>: <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">RootFilesystemPartitionSize</span>: <span style="color:#ae81ff">2048</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># LuCIè®¾ç½®</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">LuCI</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Collections</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci</span> <span style="color:#75715e"># å¼€å¯luci</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Modules</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Translations</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">Chinese(zh-cn)</span> <span style="color:#75715e"># ä¸­æ–‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Themes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-theme-agron</span> <span style="color:#75715e"># æ·»åŠ ä¸»é¢˜</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># LuCIåº”ç”¨</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Applications</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-adguardhome</span> <span style="color:#75715e"># å»å¹¿å‘Š</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-advanced-reoot</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-alist</span> <span style="color:#75715e"># æ–‡ä»¶å…±äº«ï¼Œalistç¼–è¯‘æ¯”è¾ƒè€—è´¹æ—¶é—´ï¼Œå®Œå…¨æ²¡å¿…è¦ç¼–è¯‘è¿›å†…æ ¸ï¼Œå¯ä»¥å½“ä½œè½¯ä»¶ä¸‹è½½</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-aria2</span> <span style="color:#75715e"># ä¸‹è½½å·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-cloudflared</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-ddns</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-diskman</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-dockerman</span> <span style="color:#75715e"># Docker</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-filebrowser</span> <span style="color:#75715e"># æ–‡ä»¶ç®¡ç†</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-filetransfer</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-firewall</span> <span style="color:#75715e"># é˜²ç«å¢™</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-frps</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-frpc</span> <span style="color:#75715e"># å†…ç½‘ç©¿é€</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-hd-idle</span> <span style="color:#75715e"># ç¡¬ç›˜ä¼‘çœ </span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-lucky</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-opkg</span> <span style="color:#75715e"># è½¯ä»¶åŒ…</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-openvpn</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-openvpn-server</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-passwall ç¿»å¢™</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-qos</span> <span style="color:#75715e"># æœåŠ¡è´¨é‡</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-samba</span> <span style="color:#75715e"># ç½‘ç»œå…±äº«</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-smartdns	# ä¼˜åŒ–ç§‘å­¦ä¸Šç½‘</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-upnp</span> <span style="color:#75715e"># UPnPæœåŠ¡</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-usb-printer</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-wol</span> <span style="color:#75715e"># ç½‘ç»œå”¤é†’</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Protocols</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">luci-protocol-wireguard</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯é€‰å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">BaseSystem</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">block-mount</span> <span style="color:#75715e"># åœ¨LuCIç•Œé¢æ·»åŠ &lt;æŒ‚è½½ç‚¹&gt;èœå•</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">blockd</span> <span style="color:#75715e"># è‡ªåŠ¨æŒ‚è½½è®¾å¤‡</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">wireless-tools</span> <span style="color:#75715e"># æ— çº¿æ‰©å±•å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Administration</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">htop</span> <span style="color:#75715e"># better top</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ–‡ä»¶ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">KernelModules</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Filesystems</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-ext4</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-f2fs</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-ntfs</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-squashfs</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-vfat</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fuse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># ç½‘å¡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">NetworkDevices</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-xxx</span> <span style="color:#75715e"># æœ‰çº¿ç½‘å¡æ”¯æŒï¼Œè·Ÿä»¥ä¸‹å‡ é¡¹å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§æ·»åŠ </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">NetworkSupport</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">kmod-wireguard</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">WirelessDrivers</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-rt2800-usb</span> <span style="color:#75715e"># æ·»åŠ Ralink RT5370èŠ¯ç‰‡çš„USBæ— çº¿ç½‘å¡é©±åŠ¨</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">USBSupport</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">kmod-usb-net</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-asix</span> <span style="color:#75715e"># æ·»åŠ æ”¯æŒäºšä¿¡çš„æœ‰çº¿ç½‘å¡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-asix-ax88179</span> <span style="color:#75715e"># æ·»åŠ USB3.0çš„æœ‰çº¿ç½‘å¡èŠ¯ç‰‡AX88179çš„é©±åŠ¨</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-rtl8152</span> <span style="color:#75715e"># æ·»åŠ USB2/3çš„æœ‰çº¿ç½‘å¡RTL8152/3èŠ¯ç‰‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-sr9700</span> <span style="color:#75715e"># æ·»åŠ USB2.0çš„æœ‰çº¿ç½‘å¡SR9700èŠ¯ç‰‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-core</span> <span style="color:#75715e"># å¯ç”¨USBæ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-hid</span> <span style="color:#75715e"># USBé”®é¼ æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-ohci</span> <span style="color:#75715e"># æ·»åŠ OHCIæ”¯æŒï¼Œè€USBæ‰éœ€è¦</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-storage</span> <span style="color:#75715e"># å¯ç”¨USBå­˜å‚¨</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-storage-extras</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-uhci</span> <span style="color:#75715e"># æ·»åŠ UHCIæ”¯æŒï¼Œè€USBæ‰éœ€è¦</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb2</span> <span style="color:#75715e"># å¼€å¯USB2æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb3</span> <span style="color:#75715e"># å¼€å¯USB3æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç½‘ç»œå·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Network</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">DownloadManager</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ariang</span> <span style="color:#75715e"># Aria2ç®¡ç†é¡µé¢</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">FileTransfer</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">curl</span> <span style="color:#75715e"># æ·»åŠ curlå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">wget-ssl</span> <span style="color:#75715e"># æ·»åŠ wgetå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">IP Addresses and Names</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">ddns-scripts-cloudflare</span> <span style="color:#75715e"># ç”¨äºddns</span>
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">drill	# DDNS</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VPN</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">wireguard-tools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®ç”¨å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Utilities</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Compression</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">bsdtar</span> <span style="color:#75715e"># taræ‰“åŒ…å·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">gzip</span> <span style="color:#75715e"># GZ å‹ç¼©å¥—ä»¶</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Disc</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">fdisk</span> <span style="color:#75715e"># ç£ç›˜åˆ†åŒºå·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">lsblk</span> <span style="color:#75715e"># ç£ç›˜æŸ¥çœ‹å·¥å…·</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Filesystem</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">f2fs-tools</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ntfs-3g</span> <span style="color:#75715e"># NTFSè¯»å†™æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">resize2fs</span> <span style="color:#75715e"># åˆ†åŒºå¤§å°è°ƒæ•´</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Terminal</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">screen</span> <span style="color:#75715e"># æ·»åŠ screen</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">losetup</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">pciutils</span> <span style="color:#75715e"># æ·»åŠ lspciå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">qrencode</span> <span style="color:#75715e"># wireguard qrcode</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">usbutils</span> <span style="color:#75715e"># æ·»åŠ lsusbå‘½ä»¤</span>
</span></span></code></pre></div></li>
<li>
<p>ç›®å‰æˆ‘ä½¿ç”¨çš„é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">TargetSystem</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Broadcom BCM27xx</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Subtarget</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">BCM2711 boards (64 bit)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetProfile</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Raspberry Pi 4B/400/4CM (64bit)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetImages</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">squashfs</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">KernelPartitionSize</span>: <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">RootFilesystemPartitionSize</span>: <span style="color:#ae81ff">6144</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">LuCI</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Themes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-theme-agron</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Applications</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-accesscontrol</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-adguardhome</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-advanced-reoot</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-arpbind</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-ddns</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-diskman</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-filetransfer</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-firewall</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-frpc</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-nlbwmon</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-opkg</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-samba</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-sqm</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-statistics</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-upnp</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Protocols</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">luci-protocol-wireguard</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Network</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">IP Addresses and Names</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">ddns-scripts-cloudflare</span>
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">drill</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">tcpdump</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Utilities</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">qrencode</span>
</span></span></code></pre></div></li>
<li>
<p>å…³äºTarget Imagesï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>å¦‚æœä½ å¸Œæœ›ç›´æ¥è¿è¡Œåœ¨ç‰©ç†ä¸»æœºï¼Œæ¯”å¦‚æ ‘è“æ´¾ç›´æ¥åœ¨SDå¡åˆ·å›ºä»¶ï¼Œä½¿ç”¨<code>squashfs</code></li>
<li>å¦‚æœä½ æƒ³æŠŠOpenWrtæ‰“åŒ…æˆDockeré•œåƒï¼Œé€‰æ‹©<code>tar.gz</code></li>
<li>å¦‚æœä½ æƒ³æŠŠä¸»ç³»ç»Ÿè®¾ç½®ä¸ºPVEè™šæ‹Ÿæœºï¼ŒOpenWrtä½œä¸ºè™šæ‹Ÿæœºçš„ä¸€ä¸ªç³»ç»Ÿè¿è¡Œåœ¨MiniPCä¸Šï¼Œè¯¦è§ï¼š<a href="https://kyxie.me/zh/blog/tech/router/pve/#%E7%BC%96%E8%AF%91openwrt%E7%B3%BB%E7%BB%9F">x86 Mini PCå®‰è£…PVE | Kunyang&rsquo;s Blog</a></li>
<li>å¦‚æœä½ æš‚æ—¶è¿˜æ²¡å†³å®šå°†æ¥è¦æ€ä¹ˆéƒ¨ç½²ï¼Œå¯ä»¥å…ˆéƒ½é€‰äº†</li>
<li>ä¸åŒçš„æ¶æ„çš„å¯é€‰é¡¹æ˜¯ä¸ä¸€æ ·çš„</li>
<li><code>RootFilesystemPartitionSize</code>æ˜¯å®‰è£…ä¹‹åçš„ç³»ç»Ÿå¤§å°ï¼Œæˆ‘æ ‘è“æ´¾çš„SDå¡ä¸º8Gå› æ­¤é€‰æ‹©äº†6144Mï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨PVEçš„è¯è¿™é‡Œå°±ä¸éœ€è¦çº ç»“äº†ï¼Œå¯ä»¥åœ¨PVEä¸Šåˆ†é…ç¡¬ç›˜çš„å¤§å°</li>
</ul>
</li>
<li>
<p>é…ç½®å®Œæˆåé€‰æ‹©Saveï¼Œä¼šä¿å­˜ä¸ºä¸€ä¸ª<code>.config</code>æ–‡ä»¶ã€‚åœ¨æœ€åä¸€æ­¥å®‰è£…ä¹‹å‰è¿˜éœ€è¦å®‰è£…screenï¼Œç”¨äºåˆ›å»ºæŒä¹…ä¼šè¯ï¼Œå¦åˆ™å¦‚æœä¸å°å¿ƒå…³äº†sshä¹‹å‰ç¼–è¯‘çš„å°±éƒ½æ²¡äº†ï¼ˆä½ çŒœæˆ‘æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼‰</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install screen
</span></span><span style="display:flex;"><span>screen -S buildlede
</span></span></code></pre></div></li>
<li>
<p>æœ€åæ‰§è¡Œå‘½ä»¤ç”¨8ä¸ªçº¿ç¨‹ä¸‹è½½dlåº“ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘ç”¨1ä¸ªçº¿ç¨‹ç¼–è¯‘ã€‚åœ¨è¿™é‡Œä¸€å¼€å§‹æˆ‘ç”¨çš„AWSçš„Ubuntuä¸€ç›´ä¸‹ä¸ä¸‹æ¥ï¼Œæ²¡æœ‰åŠæ³•æ¢æˆäº†æœ¬åœ°çš„Ubuntuè™šæ‹Ÿæœºæ‰ä¸‹è½½ç¼–è¯‘æˆåŠŸ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make download -j8
</span></span><span style="display:flex;"><span>make V<span style="color:#f92672">=</span>s -j1
</span></span></code></pre></div></li>
<li>
<p>ç„¶åå°±æ˜¯ç­‰å¾…ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆååœ¨<code>bin\targets</code>å¯ä»¥é€‰æ‹©<code>openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz</code>è¿™ä¸ªç‰ˆæœ¬è¿›è¡Œçƒ§å½•</p>
</li>
</ul>
<h5 id="å•ç‹¬ç¼–è¯‘">å•ç‹¬ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#å•ç‹¬ç¼–è¯‘">#</a></h5>
<p>æœ‰æ—¶å€™ç”¨ç€ç”¨ç€å‘ç°æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å•ç‹¬ç¼–è¯‘ä¸€ä¸ªæ’ä»¶</p>
<ul>
<li>
<p>ç¼–è¾‘<code>.config</code>æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div></li>
<li>
<p>æ‰¾åˆ°æˆ‘ä»¬æƒ³å•ç‹¬ç¼–è¯‘çš„æ’ä»¶ï¼Œæ¯”å¦‚<code>luci-app-diskman</code>ï¼Œè¿™æ˜¯ä¸ªç®¡ç†è·¯ç”±å™¨ä¸Šçš„ç£ç›˜å’Œåˆ†åŒºçš„æ’ä»¶ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘é€‰æ‹©ä¸º<code>[*]</code>ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªå†…ç½®æ¨¡å—ç¼–è¯‘ï¼Œä¸å¯ä»¥å¸è½½ã€‚è¿™æ¬¡çš„è¯æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸º<code>[M]</code>ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—ç¼–è¯‘</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/68ce803d682f4538656ee9062ba819f8.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="Compile Module"  />
</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make package/luci-app-diskman/compile V<span style="color:#f92672">=</span>s
</span></span></code></pre></div></li>
<li>
<p>xxxxxxxxxxÂ route add 192.168.2.0 MASK 255.255.255.0 192.168.100.1 METRIC 1bash</p>
</li>
<li>
<p>æ‰“å¼€openwrtï¼ŒSystem â†’ File Transferé€‰æ‹©æ–‡ä»¶ä¸Šä¼ ï¼Œå³ä¸‹è§’å®‰è£…å°±å¯ä»¥äº†</p>
</li>
<li>
<p>æˆ‘å®‰è£…å®ŒåOpenWrtæ²¡æœ‰ç«‹åˆ»å‡ºç°æ–°å®‰è£…çš„æ’ä»¶ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´æ‰å‡ºç°çš„</p>
</li>
</ul>
<p>å¦‚æœè¦å•ç‹¬ç¼–è¯‘å†…æ ¸æ¨¡å—ï¼Œæ¯”å¦‚<code>kmod-wireguard</code>ï¼Œå¯ä»¥åœ¨kernel moduleä¸­é€‰ä¸­å®ƒä¸º[M]ï¼Œç„¶åè¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make package/kernel/linux/compile V<span style="color:#f92672">=</span>s
</span></span></code></pre></div><p>å¾ˆå¿«ç¼–è¯‘å°±å®Œæˆäº†ï¼Œç¼–è¯‘å‡ºæ¥çš„åŒ…åœ¨<code>bin/packages/&lt;target&gt;/&lt;package-repo&gt;/kmod-wireguard_xxx.ipk</code></p>
<h5 id="ç¬¬äºŒæ¬¡ç¼–è¯‘">ç¬¬äºŒæ¬¡ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ¬¡ç¼–è¯‘">#</a></h5>
<ul>
<li>
<p>æ‹‰å–æœ€æ–°feeds</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo sh -c <span style="color:#e6db74">&#34;apt update &amp;&amp; apt upgrade -y&#34;</span>
</span></span><span style="display:flex;"><span>git pull
</span></span><span style="display:flex;"><span>./scripts/feeds update -a <span style="color:#f92672">&amp;&amp;</span> ./scripts/feeds install -a
</span></span></code></pre></div></li>
<li>
<p>æ¸…é™¤æ—§çš„ç¼–è¯‘äº§ç‰©ï¼ˆå¯é€‰ï¼‰</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make clean
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æºç æœ‰å¤§è§„æ¨¡æ›´æ–°æˆ–è€…å†…æ ¸æ›´æ–°åæ‰§è¡Œï¼Œä»¥ä¿è¯ç¼–è¯‘è´¨é‡</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ­¤æ“ä½œä¼šåˆ é™¤ /bin å’Œ /build_dir ç›®å½•ä¸­çš„æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>make dirclean
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¦‚æœè¦æ›´æ¢æ¶æ„ï¼Œä¾‹å¦‚è¦ä» x86_64 æ¢åˆ° MediaTek Ralink MIPS å»ºè®®æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·±åº¦æ¸…ç† </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ­¤æ“ä½œä¼šåˆ é™¤ /bin å’Œ /build_dir ç›®å½•çš„ä¸­çš„æ–‡ä»¶ï¼ˆmake cleanï¼‰ï¼Œä»¥åŠ /staging_dirã€/toolchainã€/tmp å’Œ /logs ä¸­çš„æ–‡ä»¶</span>
</span></span></code></pre></div></li>
<li>
<p>ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make defconfig
</span></span><span style="display:flex;"><span>make download -j8
</span></span><span style="display:flex;"><span>find dl -size -1024c -exec ls -l <span style="color:#f92672">{}</span> <span style="color:#ae81ff">\;</span>
</span></span><span style="display:flex;"><span>make -j<span style="color:#66d9ef">$(</span>nproc<span style="color:#66d9ef">)</span> <span style="color:#f92672">||</span> make -j1 <span style="color:#f92672">||</span> make -j1 V<span style="color:#f92672">=</span>s
</span></span></code></pre></div></li>
</ul>
<h4 id="github-actionsç¼–è¯‘">GitHub Actionsç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#github-actionsç¼–è¯‘">#</a></h4>
<p>ç†Ÿæ‚‰äº†æœ¬åœ°ç¼–è¯‘çš„æµç¨‹ä¹‹åå°±æ¨èä½¿ç”¨GitHub Actionsè¿›è¡Œç¼–è¯‘äº†ï¼Œè¿™æ ·å¯ä»¥æŠŠè„æ´»ç´¯æ´»å…¨éƒ¨äº¤ç»™äº‘ï¼Œæœ¬æ¥æƒ³è‡ªå·±å†™Workflowçš„<code>yaml</code>ï¼Œä½†æ˜¯æ‰¾åˆ°äº†è¿™ä¸ª<a href="https://github.com/P3TERX/Actions-OpenWrt">ä»“åº“</a>ï¼Œå†³å®šè¿˜æ˜¯ä¸é‡å¤é€ è½®å­äº†å“ˆå“ˆå“ˆã€‚</p>
<p>æ³¨æ„å¦‚æœå¸Œæœ›è‡ªåŠ¨å°†Artifactå‘å¸ƒåˆ°Releaseçš„è¯ï¼Œéœ€è¦èµ‹äºˆPATæƒé™ï¼Œåœ¨Settings â†’ Developer Settings â†’ Personal access tokens â†’ Tokens (classic) â†’ ä½ çš„Tokenï¼Œå‹¾é€‰<code>workflow</code>å’Œ<code>write:packages</code></p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/12/a38ff4328d53689478ed3404a0750d17.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="GitHub PAT Permissions"  />
</p>
<h3 id="çƒ§å½•">çƒ§å½•<a hidden class="anchor" aria-hidden="true" href="#çƒ§å½•">#</a></h3>
<blockquote>
<p>ç›´æ¥çƒ§å½•çš„imageæˆ‘ä»¬é€‰æ‹©<code>openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz</code></p>
</blockquote>
<h4 id="windows">Windows<a hidden class="anchor" aria-hidden="true" href="#windows">#</a></h4>
<p>å¯ä»¥ä½¿ç”¨<a href="https://etcher.balena.io/#download-etcher">Balena Etcher</a>æˆ–è€…å…¶ä»–çš„disk imagerè½¯ä»¶å°†imageçƒ§å½•åˆ°SDå¡ä¸­ï¼Œéå¸¸ç®€å•ï¼ŒæŒ‰é¡ºåºä¸€æ­¥ä¸€æ­¥æ¥å³å¯</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/ab0a5f269428a6dd01000e95d5797b90.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="Balena Etcher for Windows"  />
</p>
<h4 id="macos">MacOS<a hidden class="anchor" aria-hidden="true" href="#macos">#</a></h4>
<p>MacOSä¹Ÿå¯ä»¥ä½¿ç”¨Balena Etcherå°†é•œåƒå¯¼å…¥åˆ°SDå¡ä¸­ï¼Œå¦‚æœä¸æƒ³ä¸‹è½½è½¯ä»¶ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œä¹Ÿæ˜¯å¯ä»¥çš„</p>
<ul>
<li>
<p>æ‰¾åˆ°SDå¡çš„ç£ç›˜ç¼–å·ï¼Œè¿™é‡Œæˆ‘çš„SDå¡ç£ç›˜ä¸º<code>/dev/disk4</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil list
</span></span><span style="display:flex;"><span>/dev/disk4 <span style="color:#f92672">(</span>external, physical<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
</span></span><span style="display:flex;"><span>   0:     FDisk_partition_scheme                        *7.9 GB     disk4
</span></span><span style="display:flex;"><span>   1:             Windows_FAT_32 BOOT                    67.1 MB    disk4s1
</span></span><span style="display:flex;"><span>   2:                      Linux                         109.1 MB   disk4s2
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">(</span>free space<span style="color:#f92672">)</span>                         7.7 GB     -
</span></span></code></pre></div><p>ç”±äºæˆ‘è¿™é‡Œä»¥å‰è£…è¿‡ä¸€ä¸ªä¸å¸¦GUIç‰ˆæœ¬çš„OpenWrtï¼ŒSDå¡å¤šäº†å‡ ä¸ªåˆ†åŒºï¼Œè¿™æ¬¡æ‰“ç®—é‡æ–°è£…ä¸€ä¸ªå¸¦ç€GUIçš„</p>
</li>
<li>
<p>é¦–å…ˆæ¢å¤åˆ†åŒºï¼Œè¿™ä¸ªå‘½ä»¤åŒæ—¶æŠŠSDå¡è¿›è¡Œæ ¼å¼åŒ–</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil eraseDisk FAT32 SDCARD MBRFormat /dev/disk4
</span></span></code></pre></div><p>æ¢å¤åˆ†åŒºä¹‹å</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil list
</span></span><span style="display:flex;"><span>/dev/disk4 <span style="color:#f92672">(</span>external, physical<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
</span></span><span style="display:flex;"><span>   0:     FDisk_partition_scheme                        *7.9 GB     disk4
</span></span><span style="display:flex;"><span>   1:                 DOS_FAT_32 SDCARD                  7.9 GB     disk4s1
</span></span></code></pre></div></li>
<li>
<p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¸è½½ï¼ˆä½†ä¸ç§»é™¤ï¼‰ SD å¡ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºbusy</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil unmountDisk /dev/disk4
</span></span></code></pre></div></li>
<li>
<p>è§£å‹ä¸‹è½½çš„image</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gunzip ./openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz
</span></span></code></pre></div></li>
<li>
<p>ä½¿ç”¨ <code>dd</code> å†™å…¥è§£å‹åçš„ <code>.img</code> æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸€æ­¥åƒä¸‡ä¸è¦æŠ„é”™äº†ç£ç›˜ç¼–å·ï¼Œå¦åˆ™ä¼¤å®³ä¸å¯é€†ï¼Œ<code>dd</code>æ˜¯ä¸ªå¾ˆå¼ºçš„å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/Users/xxx/Desktop/openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img of<span style="color:#f92672">=</span>/dev/disk4 bs<span style="color:#f92672">=</span>1M status<span style="color:#f92672">=</span>progress
</span></span></code></pre></div><p>å¦‚æœä¸æŠ¥é”™ä¸€èˆ¬å°±æ˜¯æˆåŠŸäº†</p>
</li>
<li>
<p>æœ€åå°†SDå¡ä»ç”µè„‘æ‹”å‡ºï¼Œæ’åˆ°æ ‘è“æ´¾ä¸Šï¼Œå¯åŠ¨æ ‘è“æ´¾ï¼Œè¿™æ—¶ä½¿ç”¨ç½‘çº¿å°†æ ‘è“æ´¾çš„ä»¥å¤ªç½‘æ¥å£å’Œç”µè„‘çš„ä»¥å¤ªç½‘æ¥å£ç›¸è¿ã€‚ç”±äºOpenWrt é»˜è®¤å°†æ ‘è“æ´¾çš„<code>eth0</code>æ¥å£æ¡¥æ¥åˆ°<code>br-lan</code>å¹¶ä½¿ç”¨ IP åœ°å€ <code>192.168.1.1</code>ï¼Œæˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹ç”µè„‘ç«¯çš„Ethernetæ¥å£æ˜¯å¦ä¹Ÿåœ¨<code>192.168.1.x</code>çš„å­ç½‘ï¼Œxå¯ä»¥é€‰2 -  255çš„éšä¾¿ä¸€ä¸ªæ•°</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/2779ee13253f5ef403e70bed2319c428.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="IP Config"  />
</p>
<p>å½“æ ‘è“æ´¾å°±è·Ÿç”µè„‘åœ¨ç›¸åŒå­ç½‘åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>192.168.1.1</code>ï¼Œå°±èƒ½ç™»å½•åˆ°OpenWrtçš„GUIï¼ˆLuCIï¼‰äº†ï¼Œé»˜è®¤ç”¨æˆ·åå’Œå¯†ç æ˜¯<code>root</code>å’Œ<code>password</code></p>
</li>
<li>
<p>å¤§åŠŸå‘Šæˆäº†</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/80b4b9243748b380bdb4ca2dc581dd9c.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="Initial Page"  />
</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/e34987940f77787e00bb09a1f7d6e8e2.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="Status Page"  />
</p>
</li>
</ul>
<h3 id="ä½¿ç”¨dockerå®¹å™¨">ä½¿ç”¨Dockerå®¹å™¨<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨dockerå®¹å™¨">#</a></h3>
<p>è¯¦è§ï¼š<a href="https://kyxie.me/zh/blog/tech/router/docker-openwrt/">å°†OpenWrtåˆ¶ä½œä¸ºDockeré•œåƒ | Kunyang&rsquo;s Blog</a></p>
<h3 id="è¿æ¥è·¯ç”±å™¨">è¿æ¥è·¯ç”±å™¨<a hidden class="anchor" aria-hidden="true" href="#è¿æ¥è·¯ç”±å™¨">#</a></h3>
<ul>
<li>
<p>æˆ‘å®¶ä¸»è·¯ç”±å™¨ä½¿ç”¨çš„å­ç½‘ä¸º<code>192.168.2.x</code>ï¼Œéœ€è¦å°†æ ‘è“æ´¾æ”¹ä¸ºè¿™ä¸ªå­ç½‘ä¸‹ï¼ˆå½“ç„¶å¦‚æœä¸»è·¯ç”±å™¨å­ç½‘ä¸º<code>192.168.1.x</code>çš„è¯å°±ä¸ç”¨å¤šæŠ˜è…¾è¿™ä¸€æ­¥äº†ï¼‰ã€‚æˆ‘ä»¬å…ˆç¦ç”¨æ¡¥æ¥æ¨¡å¼å’Œä¿®æ”¹IPåœ°å€</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/network
</span></span></code></pre></div><p>ä¿®æ”¹æ–‡ä»¶ä¸º</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config interface &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option device &#39;eth0&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option proto &#39;static&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option ipaddr &#39;192.168.2.66&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option netmask &#39;255.255.255.0&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option gateway &#39;192.168.2.1&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option dns &#39;192.168.2.1&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>ç¦ç”¨DHCPï¼Œé˜²æ­¢è·Ÿä¸»è·¯ç”±å™¨çš„DHCPå†²çª</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/dhcp
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config dhcp &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option interface &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option ignore &#39;1&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>æ£€æŸ¥é˜²ç«å¢™é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/firewall
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config zone</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option name &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">list network &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option input &#39;ACCEPT&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option output &#39;ACCEPT&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option forward &#39;ACCEPT&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>åº”ç”¨è®¾ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/etc/init.d/network restart
</span></span></code></pre></div></li>
<li>
<p>è¿™æ—¶ç”±äºæˆ‘ä»¬ç”µè„‘è¿˜åœ¨<code>192.168.1.x</code>å­ç½‘ï¼Œä½†æ˜¯æ ‘è“æ´¾å·²ç»åˆ°äº†<code>192.168.2.x</code>å­ç½‘äº†ï¼Œæ‰€ä»¥è¿æ¥å¿…å®šæ˜¯æ–­å¼€çš„ï¼Œæˆ‘ä»¬å†æŠŠç”µè„‘ç«¯çš„Ethernetç«¯å£æ”¹å›<code>192.168.2.x</code>å­ç½‘ï¼Œå°±åˆèƒ½é‡æ–°è®¿é—®äº†</p>
</li>
<li>
<p>å°†æ ‘è“æ´¾ä¸ç”µè„‘æ–­å¼€è¿æ¥ï¼Œæ’åˆ°è·¯ç”±å™¨çš„LANå£ä¸Šï¼Œåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œï¼Œè€Œä¸”ç”µè„‘ä¹Ÿèƒ½è®¿é—®æ ‘è“æ´¾äº†</p>
</li>
</ul>
<h3 id="è®¾ç½®æ—è·¯ç”±">è®¾ç½®æ—è·¯ç”±<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®æ—è·¯ç”±">#</a></h3>
<p>ä»¥ä¸Šæ­¥éª¤åªæ˜¯å°†æ ‘è“æ´¾ä½œä¸ºä¸€ä¸ªç”¨ç½‘è®¾å¤‡åŠ å…¥äº†å®¶åº­çš„å±€åŸŸç½‘ï¼Œæˆ‘ä»¬çš„ç»ˆç«¯è®¾å¤‡è¿˜æ˜¯æ²¿ç€ä¸»è·¯ç”±è¿™æ¡çº¿è¿›è¡Œé€šä¿¡ï¼Œè¦æƒ³ä½œä¸ºæ—è·¯ç”±è¿˜éœ€è¦è¿›ä¸€æ­¥è®¾ç½®</p>
<ul>
<li>
<p>å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†Wifiçš„ç½‘å…³ä»è·¯ç”±å™¨ä¹‹å‰DHCPè‡ªåŠ¨åˆ†é…çš„åœ°å€æ”¹ä¸ºæ—è·¯ç”±æ ‘è“æ´¾å³å¯ï¼Œå‡è®¾æˆ‘çš„ä¸»è·¯ç”±å™¨IPåœ°å€ä¸º<code>192.168.2.1</code>ï¼Œæˆ‘çš„ç”µè„‘IPåœ°å€ä¸º<code>192.168.2.54</code>ï¼Œæˆ‘çš„æ ‘è“æ´¾çš„IPåœ°å€ä¸º<code>192.168.2.66</code>ï¼Œæˆ‘éœ€è¦è¿™ä¹ˆä¿®æ”¹ï¼š</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/ebc48f4926e3e6a4c7ac32105e507350.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="Windows Configure Gateway"  />
</p>
</li>
<li>
<p>MacBookä¹Ÿä¸€æ ·</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/0e7163529845eb6e94424df952cb2c44.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="MacBook Configure Gateway"  />
</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/2bac0f8e0a365ae7e9d7cc020f59d443.png?visual_effect=watermark,text__QEt5eGll,width__0.15,height__0.05,offset_x__0.8,offset_y__0.9,color__D3D3D3,font__QXJjaGl0ZWN0cyBEYXVnaHRlcg" alt="MacBook Configure DNS"  />
</p>
</li>
<li>
<p>åŒæ ·çš„iPhoneä¹Ÿå¯ä»¥è®¾ç½®ï¼Œè¿™é‡Œæˆ‘å°±ä¸æ”¾å›¾äº†</p>
</li>
<li>
<p>å› ä¸ºæ€•ç‚¸ç½‘æˆ‘æš‚æ—¶å…ˆä½¿ç”¨è¿™ç§éä¾µå…¥å¼çš„è®¾ç½®ï¼Œå®ƒåªå½±å“æŠŠç½‘å…³è®¾ç½®ä¸ºè½¯è·¯ç”±çš„ç»ˆç«¯ï¼Œè¿™æ ·ä¸€æ—¦ç½‘åäº†åªå½±å“éƒ¨åˆ†è®¾å¤‡ï¼Œæˆ–è€…æˆ‘ä¿®æ”¹ä¸€ä¸‹ç½‘å…³ä¿®æ”¹åˆ°ä¸»è·¯ç”±å™¨çš„IPåœ°å€å°±å¯ä»¥äº†</p>
</li>
</ul>
<p>æ•™ç¨‹è¯¦è§ï¼š</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/w7rwNF2Q3lM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…æ’ä»¶">#</a></h3>
<h4 id="å¸è½½æ’ä»¶">å¸è½½æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å¸è½½æ’ä»¶">#</a></h4>
<ul>
<li>å¯ä»¥åœ¨System â†’ Software â†’ Installedä¸­å¸è½½æ’ä»¶</li>
<li>æ³¨æ„ç›´æ¥ç¼–è¯‘è¿›å†…æ ¸å›ºä»¶çš„æ’ä»¶æ— æ³•å¸è½½</li>
</ul>
<h4 id="å®‰è£…æ’ä»¶-1">å®‰è£…æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…æ’ä»¶-1">#</a></h4>
<h5 id="ç›´æ¥å®‰è£…">ç›´æ¥å®‰è£…<a hidden class="anchor" aria-hidden="true" href="#ç›´æ¥å®‰è£…">#</a></h5>
<p>å›½å¤–æºArm</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>src/gz openwrt_core https://downloads.openwrt.org/releases/23.05.0/targets/bcm27xx/bcm2711/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_base https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/base
</span></span><span style="display:flex;"><span>src/gz openwrt_luci https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/luci
</span></span><span style="display:flex;"><span>src/gz openwrt_packages https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_routing https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/routing
</span></span><span style="display:flex;"><span>src/gz openwrt_telephony https://downloads.openwrt.org/releases/23.05.0/packages/aarch64_cortex-a72/telephony
</span></span></code></pre></div><p>å›½å¤–æºx86</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>src/gz openwrt_core https://downloads.openwrt.org/releases/23.05.0/targets/x86/64/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_base https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/base
</span></span><span style="display:flex;"><span>src/gz openwrt_luci https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/luci
</span></span><span style="display:flex;"><span>src/gz openwrt_packages https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_routing https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/routing
</span></span><span style="display:flex;"><span>src/gz openwrt_telephony https://downloads.openwrt.org/releases/23.05.0/packages/x86_64/telephony
</span></span></code></pre></div><p>å›½å†…æº Arm</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>src/gz openwrt_core https://mirrors.tencent.com/lede/snapshots/targets/bcm27xx/bcm2711/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_base https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/base
</span></span><span style="display:flex;"><span>src/gz openwrt_luci https://mirrors.tencent.com/lede/releases/18.06.9/packages/aarch64_cortex-a72/luci
</span></span><span style="display:flex;"><span>src/gz openwrt_packages https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_routing https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/routing
</span></span><span style="display:flex;"><span>src/gz openwrt_telephony https://mirrors.tencent.com/lede/snapshots/packages/aarch64_cortex-a72/telephony
</span></span></code></pre></div><p>å›½å†…æºx86</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>src/gz openwrt_core https://mirrors.tencent.com/lede/releases/24.10.0-rc1/targets/x86/64/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_base https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/base
</span></span><span style="display:flex;"><span>src/gz openwrt_helloworld https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/helloworld
</span></span><span style="display:flex;"><span>src/gz openwrt_luci https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/luci
</span></span><span style="display:flex;"><span>src/gz openwrt_packages https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/packages
</span></span><span style="display:flex;"><span>src/gz openwrt_routing https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/routing
</span></span><span style="display:flex;"><span>src/gz openwrt_telephony https://mirrors.tencent.com/lede/releases/24.10.0-rc1/packages/x86_64/telephony
</span></span></code></pre></div><h5 id="è‡ªå·±ç¼–è¯‘">è‡ªå·±ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#è‡ªå·±ç¼–è¯‘">#</a></h5>
<ul>
<li>
<p>é¦–å…ˆéœ€è¦åœ¨Ubuntuä¸Šç¼–è¯‘æ’ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div><p>åœ¨LuCI â†’ Applicationså¯ä»¥æŠŠå›ºä»¶å…¨é€‰ä¸Šï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ˜¯åšä¸ªå›ºä»¶åº“ï¼Œä¹‹åæœ‰å•¥éœ€æ±‚å°±è£…å•¥ã€‚é€‰æ‹©æ—¶åº”è¯¥æ¨¡å—åŒ–ï¼ŒæŒ‰ç©ºæ ¼è®©å‰é¢æ‹¬å·é‡Œå‡ºç°ä¸€ä¸ªMã€‚ä¿å­˜åå›åˆ°å‘½ä»¤è¡Œå¼€å§‹ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make -j1 V<span style="color:#f92672">=</span>s
</span></span></code></pre></div></li>
<li>
<p>ç¼–è¯‘å®Œæˆååœ¨<code>bin\packages</code>ä¸­å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬ç¼–è¯‘çš„å…¨éƒ¨æ’ä»¶äº†ï¼Œè€Œä¸”éƒ½ä¸º<code>.ipk</code>æ ¼å¼</p>
</li>
</ul>
<h3 id="å¸¸è§ä½¿ç”¨åœºæ™¯">å¸¸è§ä½¿ç”¨åœºæ™¯<a hidden class="anchor" aria-hidden="true" href="#å¸¸è§ä½¿ç”¨åœºæ™¯">#</a></h3>
<h4 id="ddns">DDNS<a hidden class="anchor" aria-hidden="true" href="#ddns">#</a></h4>
<ul>
<li>è¯¦è§ï¼š<a href="https://kyxie.me/zh/blog/tech/router/ddns/">OpenWrté…ç½®DDNS | Kunyang&rsquo;s Blog</a></li>
</ul>
<h4 id="å»å¹¿å‘Š">å»å¹¿å‘Š<a hidden class="anchor" aria-hidden="true" href="#å»å¹¿å‘Š">#</a></h4>
<ul>
<li>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰
<ul>
<li>luci-app-adguardhome</li>
</ul>
</li>
</ul>
<p>é…ç½®å‚è€ƒï¼š</p>

<!DOCTYPE HTML>
<html lang="en">

<head>
    <style type="text/css">
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }

        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    </style>
    <title></title>
</head>

<body>
    <div class="bilibili_shortcodes">
        <iframe
            src="https://player.bilibili.com/player.html?bvid=BV1vi4y137MH&page=1&high_quality=1&danmaku=0&as_wide=0"
            scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
        </iframe>
    </div>
</body>

</html>
<h4 id="å¤–ç½‘è®¿é—®æˆ‘çš„windowså°å¼æœº">å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº<a hidden class="anchor" aria-hidden="true" href="#å¤–ç½‘è®¿é—®æˆ‘çš„windowså°å¼æœº">#</a></h4>
<h5 id="wireguard">Wireguard<a hidden class="anchor" aria-hidden="true" href="#wireguard">#</a></h5>
<ul>
<li>Wireguardå› ä¸ºæ¯”OpenVPNè½»é‡åŒ–é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤ç›®å‰æ˜¯æˆ‘çš„é¦–é€‰</li>
<li>é…ç½®å‚è€ƒï¼š<a href="https://kyxie.me/zh/blog/tech/router/wireguard/">OpenWrté…ç½®Wireguard | Kunyang&rsquo;s Blog</a></li>
</ul>
<h5 id="zerotire">ZeroTire<a hidden class="anchor" aria-hidden="true" href="#zerotire">#</a></h5>
<ul>
<li>æ‰€éœ€æ’ä»¶
<ul>
<li>luci-app-zerotire</li>
</ul>
</li>
</ul>
<p>é…ç½®å‚è€ƒï¼š</p>

<!DOCTYPE HTML>
<html lang="en">

<head>
    <style type="text/css">
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }

        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    </style>
    <title></title>
</head>

<body>
    <div class="bilibili_shortcodes">
        <iframe
            src="https://player.bilibili.com/player.html?bvid=BV1hT4y1E78k&page=1&high_quality=1&danmaku=0&as_wide=0"
            scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
        </iframe>
    </div>
</body>

</html>
<h5 id="openvpn">OpenVPN<a hidden class="anchor" aria-hidden="true" href="#openvpn">#</a></h5>
<ul>
<li>æ‰€éœ€æ’ä»¶
<ul>
<li>luci-app-openvpn</li>
<li>luci-app-openvpn-server</li>
<li>luci-i18n-openvpn-server-zh-cn</li>
<li>luci-i18n-openvpn-zh-cn</li>
<li>open-vpn-easy-rsa</li>
<li>openvpn-openssl</li>
</ul>
</li>
</ul>
<h4 id="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†<a hidden class="anchor" aria-hidden="true" href="#æ–‡ä»¶ç®¡ç†">#</a></h4>
<ul>
<li>æ–‡ä»¶ç®¡ç†å™¨
<ul>
<li>luci-app-filebrowser</li>
<li>luci-app-filetransfer</li>
<li>luci-app-samba</li>
</ul>
</li>
</ul>
<p>é…ç½®å‚è€ƒï¼š</p>

<!DOCTYPE HTML>
<html lang="en">

<head>
    <style type="text/css">
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }

        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    </style>
    <title></title>
</head>

<body>
    <div class="bilibili_shortcodes">
        <iframe
            src="https://player.bilibili.com/player.html?bvid=BV1n54y1278r&page=1&high_quality=1&danmaku=0&as_wide=0"
            scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
        </iframe>
    </div>
</body>

</html>
<ul>
<li>äº‘ç›˜ç®¡ç†å™¨ï¼Œæ³¨æ„alistå¼ºçƒˆä¸å»ºè®®é€‰ä¸Šç¼–è¯‘ï¼Œä¼šå¯¼è‡´ç¼–è¯‘äº§ç‰©ç‰¹åˆ«å¤§
<ul>
<li>luci-app-alist</li>
<li>luci-app-cloudflared</li>
<li>é…ç½®å‚è€ƒï¼š<a href="https://kyxie.me/zh/blog/tech/router/alist/">é…ç½®AList | Kunyang&rsquo;s Blog</a></li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="next" href="https://kyxie.me/zh/blog/life/bike/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Specialized Tarmac SL6è£…è½¦</span>
  </a>
</nav>




  </footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">Tell me something...</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.5.10/dist/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-kyxie.vercel.app/",  
            el: "#tcomment",
            lang: 'en-US',
            region: '',  
            path: window.TWIKOO_MAGIC_PATH || window.location.pathname,
        });
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="https://kyxie.me/zh/">Kunyang&#39;s Blog</a></span>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_site_uv"></span>
        Views: <span id="busuanzi_value_site_pv"></span>
    </span>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const uvElement = document.getElementById('busuanzi_value_site_uv');
            const pvElement = document.getElementById('busuanzi_value_site_pv');
            const initialUv = 29000;
            const initialPv = 70000;
            if (!uvElement || !pvElement) {
                console.error("Busuanzi elements not found.");
                return;
            }
            const uvObs = new MutationObserver((mutationsList) => {
                for (let mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        uvObs.disconnect();
                        mutation.target.innerHTML = parseInt(mutation.target.innerHTML || 0) + initialUv;
                        break;
                    }
                }
            });
            const pvObs = new MutationObserver((mutationsList) => {
                for (let mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        pvObs.disconnect();
                        mutation.target.innerHTML = parseInt(mutation.target.innerHTML || 0) + initialPv;
                        break;
                    }
                }
            });
            uvObs.observe(uvElement, { childList: true });
            pvObs.observe(pvElement, { childList: true });
        });
    </script>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerText = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerText = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
