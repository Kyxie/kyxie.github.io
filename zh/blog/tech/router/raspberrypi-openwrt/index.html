<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ä½¿ç”¨æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”± | Kunyang&#39;s Blog</title>
<meta name="keywords" content="Raspberry Pi, OpenWrt">
<meta name="description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…">
<meta name="author" content="Kyxie">
<link rel="canonical" href="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.d0958031cf49f400cc602dcdcb6fbfc54da190b50aaf1a3f5a054b2e378c0a4c.css" integrity="sha256-0JWAMc9J9ADMYC3Ny2&#43;/xU2hkLUKrxo/WgVLLjeMCkw=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.f61a30837a1dd79c8e15931b0916e2469274f1900212a78e5fcc9b3d40026a16.js" integrity="sha256-9howg3od15yOFZMbCRbiRpJ08ZACEqeOX8ybPUACahY="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kyxie.me/Favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kyxie.me/Favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kyxie.me/Favicon.png">
<link rel="apple-touch-icon" href="https://kyxie.me/Favicon.png">
<link rel="mask-icon" href="https://kyxie.me/Favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script>





<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">


<link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet"><meta property="og:title" content="ä½¿ç”¨æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±" />
<meta property="og:description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-11-11T13:13:13-04:00" />
<meta property="article:modified_time" content="2024-11-15T14:35:15-05:00" /><meta property="og:site_name" content="Kyxie" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ä½¿ç”¨æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±"/>
<meta name="twitter:description" content="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B&#43; 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "åšå®¢ ğŸ“’",
      "item": "https://kyxie.me/zh/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "æŠ€æœ¯ ğŸ”§",
      "item": "https://kyxie.me/zh/blog/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "è·¯ç”± ğŸ›œ",
      "item": "https://kyxie.me/zh/blog/tech/router/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "ä½¿ç”¨æ ‘è“æ´¾4B+å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
      "item": "https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ä½¿ç”¨æ ‘è“æ´¾4B+å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
  "name": "ä½¿ç”¨æ ‘è“æ´¾4B\u002bå®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±",
  "description": "éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+ 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…",
  "keywords": [
    "Raspberry Pi", "OpenWrt"
  ],
  "articleBody": "éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶ ç¡¬ä»¶ ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘ å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+ 8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š SDå¡çš„è¯»å¡å™¨ ä¸€æ ¹ç½‘çº¿ æ˜¾ç¤ºå™¨ï¼ˆéå¿…é¡»ï¼‰ï¼ŒMicro USB - HDMIçº¿ï¼ˆéå¿…é¡»ï¼‰ è½¯ä»¶ Balena Etcherï¼ŒMacBookç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸‹è½½è¿™ä¸ªï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨å‘½ä»¤è¡Œä»£æ›¿ VM Virtual Boxå’ŒUbuntuè™šæ‹Ÿæœºï¼Œéå¿…é¡»ï¼Œç”¨äºç¼–è¯‘OpenWrtå›ºä»¶ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹è½½åˆ«äººç¼–è¯‘å¥½çš„å›ºä»¶ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç¼–è¯‘60GBå°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¸Œæœ›ç¼–è¯‘ä¸€ä¸ªå›ºä»¶åº“ï¼Œæƒ³æŠŠæ‰€æœ‰åŠŸèƒ½å…¨éƒ¨é€‰ä¸Šï¼Œ60GBä¸å¤Ÿï¼Œå»ºè®®åˆ†é…128GBå‚¨å­˜ SecureCRTæˆ–PuTTyï¼Œéå¿…é¡»ï¼Œä¸çŸ¥é“å¤§å®¶ç”¨ä»€ä¹ˆå‘½ä»¤è¡Œç»ˆç«¯ï¼Œä½†æ˜¯æˆ‘MacBookå’ŒWindowséƒ½æ˜¯ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œç»ˆç«¯ è·å¾—é•œåƒ ä¸‹è½½é•œåƒ å¯ä»¥ä»OpenWrtçš„å®˜ç½‘ä¸‹è½½é•œåƒ\nç¼–è¯‘é•œåƒ ä½†æˆ‘æ˜¯æ¯”è¾ƒèƒ½æŠ˜è…¾çš„ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¸ªä»“åº“ï¼šLeanï¼Œreadmeæœ‰æ¯”è¾ƒè¯¦ç»†çš„ç¼–è¯‘æ­¥éª¤ï¼Œäºæ˜¯å†³å®šè‡ªå·±å°è¯•ä¸€ä¸‹\nç¬¬ä¸€æ¬¡ç¼–è¯‘ é¦–å…ˆåœ¨Ubuntuä¸Šclone repo\nhttps://github.com/coolsnowwolf/lede.git å®‰è£…ä¾èµ–åŒ…\nsudo apt update -y sudo apt full-upgrade -y sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential \\ bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib \\ git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev \\ libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev \\ libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python3 \\ python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo \\ uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev æ›´æ–°feedå¹¶é€‰æ‹©é…ç½®\ncd lede ./scripts/feeds update -a ./scripts/feeds install -a make menuconfig è¾“å…¥è¿™ä¸ªå‘½ä»¤åå°±å¼€å¯äº†é…ç½®é¡µé¢ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾4Bï¼Œæˆ‘ç›®å‰çš„å¸¸ç”¨åœºæ™¯æœ‰è§è¿™é‡Œ\n# ç¼–è¯‘çš„ç›®æ ‡ç³»ç»Ÿ TargetSystem: - Broadcom BCM27xx Subtarget: - BCM2711 boards (64 bit) TargetProfile: - Raspberry Pi 4B/400/4CM (64bit) # é•œåƒå‚æ•° TargetImages: - ext4 # ext4æ ¼å¼çš„å›ºä»¶å¯æ–¹ä¾¿åœ°è°ƒæ•´åˆ†åŒºå¤§å° - squashfs # squashfsæ ¼å¼çš„å›ºä»¶å¯æ¢å¤å‡ºå‚è®¾ç½® - KernelPartitionSize: 64 # bootåˆ†åŒºå¤§å°ä¸º64M - RootFilesystemPartitionSize: 512 # rootåˆ†åŒºå¤§å°ä¸º512M # å¯é€‰å·¥å…· BaseSystem: - block-mount # åœ¨LuCIç•Œé¢æ·»åŠ \u003cæŒ‚è½½ç‚¹\u003eèœå• - blockd # è‡ªåŠ¨æŒ‚è½½è®¾å¤‡ - wireless-tools # æ— çº¿æ‰©å±•å·¥å…· Administration: - htop # æ·»åŠ htopå‘½ä»¤ Firmware: - xxx # é€‰æ‹©ä½ éœ€è¦çš„ç½‘å¡å›ºä»¶ï¼Œé»˜è®¤å³å¯ # æ–‡ä»¶ç³»ç»Ÿ KernelModules: Filesystems: - kmod-fs-ext4 - kmod-fs-ntfs - kmod-fs-squashfs - kmod-fs-vfat - kmod-fuse # ç½‘å¡æ”¯æŒ NetworkDevices: - kmod-xxx # æœ‰çº¿ç½‘å¡æ”¯æŒï¼Œè·Ÿä»¥ä¸‹å‡ é¡¹å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§æ·»åŠ  NetworkSupport: - kmod-wireguard WirelessDrivers: - kmod-rt2800-usb # æ·»åŠ Ralink RT5370èŠ¯ç‰‡çš„USBæ— çº¿ç½‘å¡é©±åŠ¨ USBSupport: - kmod-usb-net: - kmod-usb-net-asix # æ·»åŠ æ”¯æŒäºšä¿¡çš„æœ‰çº¿ç½‘å¡æ”¯æŒ - kmod-usb-net-asix-ax88179 # æ·»åŠ USB3.0çš„æœ‰çº¿ç½‘å¡èŠ¯ç‰‡AX88179çš„é©±åŠ¨ - kmod-usb-net-rtl8152 # æ·»åŠ USB2/3çš„æœ‰çº¿ç½‘å¡RTL8152/3èŠ¯ç‰‡æ”¯æŒ - kmod-usb-net-sr9700 # æ·»åŠ USB2.0çš„æœ‰çº¿ç½‘å¡SR9700èŠ¯ç‰‡æ”¯æŒ - kmod-usb-core # å¯ç”¨USBæ”¯æŒ - kmod-usb-hid # USBé”®é¼ æ”¯æŒ - kmod-usb-ohci # æ·»åŠ OHCIæ”¯æŒ - kmod-usb-storage # å¯ç”¨USBå­˜å‚¨ - kmod-usb-storage-extras - kmod-usb-uhci # æ·»åŠ UHCIæ”¯æŒ - kmod-usb2 # å¼€å¯USB2æ”¯æŒ - kmod-usb3 # å¼€å¯USB3æ”¯æŒ # LuCIè®¾ç½® LuCI: Collections: - luci # å¼€å¯luci Modules: Translations: - Chinese(zh-cn) # ä¸­æ–‡æ”¯æŒ Themes: - luci-theme-agron # æ·»åŠ ä¸»é¢˜ # LuCIåº”ç”¨ Applications: - luci-app-adguardhome # å»å¹¿å‘Š - luci-app-alist # æ–‡ä»¶å…±äº« - luci-app-aria2 # ä¸‹è½½å·¥å…· - luci-app-advanced-reoot - luci-app-filebrowser # æ–‡ä»¶ç®¡ç† - luci-app-filetransfer - luci-app-firewall # é˜²ç«å¢™ - luci-app-frps - luci-app-frpc # å†…ç½‘ç©¿é€ - luci-app-hd-idle # ç¡¬ç›˜ä¼‘çœ  - luci-app-lucky - luci-app-opkg # è½¯ä»¶åŒ… - luci-app-openvpn - luci-app-openvpn-server - luci-app-qos # æœåŠ¡è´¨é‡ - luci-app-samba # ç½‘ç»œå…±äº« - luci-app-shadowsocks-libev # ç¿»å¢™è½¯ä»¶ - luci-app-upnp # UPnPæœåŠ¡ - luci-app-wol # ç½‘ç»œå”¤é†’ Protocols: - luci-protocol-wireguard # ç½‘ç»œå·¥å…· Network: DownloadManager: - ariang # Aria2ç®¡ç†é¡µé¢ FileTransfer: - Aria2Configuration: - *** # é€‰æ‹©Aria2æ”¯æŒçš„åŠŸèƒ½ - curl # æ·»åŠ curlå‘½ä»¤ - wget # æ·»åŠ wgetå‘½ä»¤ VPN: - wireguard-tools # å®ç”¨å·¥å…· Utilities: Compression: - bsdtar # taræ‰“åŒ…å·¥å…· - gzip # GZ å‹ç¼©å¥—ä»¶ Disc: - fdisk # ç£ç›˜åˆ†åŒºå·¥å…· - lsblk # ç£ç›˜æŸ¥çœ‹å·¥å…· Filesystem: - ntfs-3g # NTFSè¯»å†™æ”¯æŒ - resize2fs # åˆ†åŒºå¤§å°è°ƒæ•´ Terminal: - screen # æ·»åŠ screen - piciutils # æ·»åŠ lspciå‘½ä»¤ - usbutils # æ·»åŠ lsusbå‘½ä»¤ é…ç½®å®Œæˆåé€‰æ‹©Saveï¼Œä¼šä¿å­˜ä¸ºä¸€ä¸ª.configæ–‡ä»¶ã€‚åœ¨æœ€åä¸€æ­¥å®‰è£…ä¹‹å‰è¿˜éœ€è¦å®‰è£…screenï¼Œç”¨äºåˆ›å»ºæŒä¹…ä¼šè¯ï¼Œå¦åˆ™å¦‚æœä¸å°å¿ƒå…³äº†sshä¹‹å‰ç¼–è¯‘çš„å°±éƒ½æ²¡äº†ï¼ˆä½ çŒœæˆ‘æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼‰\nsudo apt install screen screen -S buildlede æœ€åæ‰§è¡Œå‘½ä»¤ç”¨8ä¸ªçº¿ç¨‹ä¸‹è½½dlåº“ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘ç”¨1ä¸ªçº¿ç¨‹ç¼–è¯‘ã€‚åœ¨è¿™é‡Œä¸€å¼€å§‹æˆ‘ç”¨çš„AWSçš„Ubuntuä¸€ç›´ä¸‹ä¸ä¸‹æ¥ï¼Œæ²¡æœ‰åŠæ³•æ¢æˆäº†æœ¬åœ°çš„Ubuntuè™šæ‹Ÿæœºæ‰ä¸‹è½½ç¼–è¯‘æˆåŠŸ\nmake download -j8 make V=s -j1 ç„¶åå°±æ˜¯ç­‰å¾…ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆååœ¨bin\\targetså¯ä»¥é€‰æ‹©openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gzè¿™ä¸ªç‰ˆæœ¬è¿›è¡Œçƒ§å½•\nå•ç‹¬ç¼–è¯‘ æœ‰æ—¶å€™ç”¨ç€ç”¨ç€å‘ç°æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å•ç‹¬ç¼–è¯‘ä¸€ä¸ªæ’ä»¶\nç¼–è¾‘.configæ–‡ä»¶\nmake menuconfig æ‰¾åˆ°æˆ‘ä»¬æƒ³å•ç‹¬ç¼–è¯‘çš„æ’ä»¶ï¼Œæ¯”å¦‚luci-app-diskmanï¼Œè¿™æ˜¯ä¸ªç®¡ç†è·¯ç”±å™¨ä¸Šçš„ç£ç›˜å’Œåˆ†åŒºçš„æ’ä»¶ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘é€‰æ‹©ä¸º[*]ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªå†…ç½®æ¨¡å—ç¼–è¯‘ï¼Œä¸å¯ä»¥å¸è½½ã€‚è¿™æ¬¡çš„è¯æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸º[M]ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—ç¼–è¯‘\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥ç¼–è¯‘\nmake package/luci-app-diskman/compile V=s ç¼–è¯‘å®Œæˆååœ¨/bin/packages/aarch64_cortex-a72/luciæ–‡ä»¶å¤¹ä¸‹èƒ½æ‰¾åˆ°luci-app-diskman_v0.2.11_all.ipk\næ‰“å¼€openwrtï¼ŒSystem -\u003e File Transferé€‰æ‹©æ–‡ä»¶ä¸Šä¼ ï¼Œå³ä¸‹è§’å®‰è£…å°±å¯ä»¥äº†\næˆ‘å®‰è£…å®ŒåOpenWrtæ²¡æœ‰ç«‹åˆ»å‡ºç°æ–°å®‰è£…çš„æ’ä»¶ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´æ‰å‡ºç°çš„\nå¦‚æœè¦å•ç‹¬ç¼–è¯‘å†…æ ¸æ¨¡å—ï¼Œæ¯”å¦‚kmod-wireguardï¼Œå¯ä»¥åœ¨kernel moduleä¸­é€‰ä¸­å®ƒä¸º[M]ï¼Œç„¶åè¿è¡Œ\nmake package/kernel/linux/compile V=s å¾ˆå¿«ç¼–è¯‘å°±å®Œæˆäº†ï¼Œç¼–è¯‘å‡ºæ¥çš„åŒ…åœ¨bin/packages///kmod-wireguard_xxx.ipk\nçƒ§å½• Windows å¯ä»¥ä½¿ç”¨Balena Etcheræˆ–è€…å…¶ä»–çš„disk imagerè½¯ä»¶å°†imageçƒ§å½•åˆ°SDå¡ä¸­ï¼Œéå¸¸ç®€å•ï¼ŒæŒ‰é¡ºåºä¸€æ­¥ä¸€æ­¥æ¥å³å¯\nMacOS MacOSä¹Ÿå¯ä»¥ä½¿ç”¨Balena Etcherå°†é•œåƒå¯¼å…¥åˆ°SDå¡ä¸­ï¼Œä½†æ˜¯æˆ‘ä¸å–œæ¬¢ä¸‹ä¹±ä¸ƒå…«ç³Ÿçš„è½¯ä»¶ï¼Œå¹²è„†ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œäº†\næ‰¾åˆ°SDå¡çš„ç£ç›˜ç¼–å·ï¼Œè¿™é‡Œæˆ‘çš„SDå¡ç£ç›˜ä¸º/dev/disk4\ndiskutil list /dev/disk4 (external, physical): #: TYPE NAME SIZE IDENTIFIER 0: FDisk_partition_scheme *7.9 GB disk4 1: Windows_FAT_32 BOOT 67.1 MB disk4s1 2: Linux 109.1 MB disk4s2 (free space) 7.7 GB - ç”±äºæˆ‘è¿™é‡Œä»¥å‰è£…è¿‡ä¸€ä¸ªä¸å¸¦GUIç‰ˆæœ¬çš„OpenWrtï¼ŒSDå¡å¤šäº†å‡ ä¸ªåˆ†åŒºï¼Œè¿™æ¬¡æ‰“ç®—é‡æ–°è£…ä¸€ä¸ªå¸¦ç€GUIçš„\né¦–å…ˆæ¢å¤åˆ†åŒºï¼Œè¿™ä¸ªå‘½ä»¤åŒæ—¶æŠŠSDå¡è¿›è¡Œæ ¼å¼åŒ–\ndiskutil eraseDisk FAT32 SDCARD MBRFormat /dev/disk4 æ¢å¤åˆ†åŒºä¹‹å\ndiskutil list /dev/disk4 (external, physical): #: TYPE NAME SIZE IDENTIFIER 0: FDisk_partition_scheme *7.9 GB disk4 1: DOS_FAT_32 SDCARD 7.9 GB disk4s1 è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¸è½½ï¼ˆä½†ä¸ç§»é™¤ï¼‰ SD å¡ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºbusy\ndiskutil unmountDisk /dev/disk4 Unmount of all volumes on disk4 was successful è§£å‹ä¸‹è½½çš„image\ngunzip ./openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz ä½¿ç”¨ dd å†™å…¥è§£å‹åçš„ .img æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸€æ­¥åƒä¸‡ä¸è¦æŠ„é”™äº†ç£ç›˜ç¼–å·ï¼Œå¦åˆ™ä¼¤å®³ä¸å¯é€†ï¼Œddæ˜¯ä¸ªå¾ˆå¼ºçš„å‘½ä»¤\nsudo dd if=/Users/kunyangxie/Desktop/openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img of=/dev/disk4 bs=1M status=progress 286261248 bytes (286 MB, 273 MiB) transferred 69.070s, 4144 kB/s 275+1 records in 275+1 records out 288454957 bytes transferred in 69.735447 secs (4136418 bytes/sec) å¦‚æœä¸æŠ¥é”™ä¸€èˆ¬å°±æ˜¯æˆåŠŸäº†\næœ€åå°†SDå¡ä»ç”µè„‘æ‹”å‡ºï¼Œæ’åˆ°æ ‘è“æ´¾ä¸Šï¼Œå¯åŠ¨æ ‘è“æ´¾ï¼Œè¿™æ—¶ä½¿ç”¨ç½‘çº¿å°†æ ‘è“æ´¾çš„ä»¥å¤ªç½‘æ¥å£å’Œç”µè„‘çš„ä»¥å¤ªç½‘æ¥å£ç›¸è¿ã€‚ç”±äºOpenWrt é»˜è®¤å°†æ ‘è“æ´¾çš„eth0æ¥å£æ¡¥æ¥åˆ°br-lanå¹¶ä½¿ç”¨ IP åœ°å€ 192.168.1.1ï¼Œæˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹ç”µè„‘ç«¯çš„Ethernetæ¥å£æ˜¯å¦ä¹Ÿåœ¨192.168.1.xçš„å­ç½‘ï¼Œxå¯ä»¥é€‰2 - 255çš„éšä¾¿ä¸€ä¸ªæ•°\nå½“æ ‘è“æ´¾å°±è·Ÿç”µè„‘åœ¨ç›¸åŒå­ç½‘åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥192.168.1.1ï¼Œå°±èƒ½ç™»å½•åˆ°OpenWrtçš„GUIï¼ˆLuCIï¼‰äº†ï¼Œé»˜è®¤ç”¨æˆ·åå’Œå¯†ç æ˜¯rootå’Œpassword\nå¤§åŠŸå‘Šæˆäº†\nè¿æ¥è·¯ç”±å™¨ æˆ‘å®¶ä¸»è·¯ç”±å™¨ä½¿ç”¨çš„å­ç½‘ä¸º192.168.2.xï¼Œéœ€è¦å°†æ ‘è“æ´¾æ”¹ä¸ºè¿™ä¸ªå­ç½‘ä¸‹ï¼ˆå½“ç„¶å¦‚æœä¸»è·¯ç”±å™¨å­ç½‘ä¸º192.168.1.xçš„è¯å°±ä¸ç”¨å¤šæŠ˜è…¾è¿™ä¸€æ­¥äº†ï¼‰ã€‚æˆ‘ä»¬å…ˆç¦ç”¨æ¡¥æ¥æ¨¡å¼å’Œä¿®æ”¹IPåœ°å€\nvi /etc/config/network ä¿®æ”¹æ–‡ä»¶ä¸º\nconfig interface 'lan' option device 'eth0' option proto 'static' option ipaddr '192.168.2.66' option netmask '255.255.255.0' option gateway '192.168.2.1' option dns '192.168.2.1' option ip6assign '60' ç¦ç”¨DHCPï¼Œé˜²æ­¢è·Ÿä¸»è·¯ç”±å™¨çš„DHCPå†²çª\nvi /etc/config/dhcp config dhcp 'lan' option interface 'lan' option ignore '1' æ£€æŸ¥é˜²ç«å¢™é…ç½®\nvi /etc/config/firewall config zone option name 'lan' list network 'lan' option input 'ACCEPT' option output 'ACCEPT' option forward 'ACCEPT' åº”ç”¨è®¾ç½®\n/etc/init.d/network restart è¿™æ—¶ç”±äºæˆ‘ä»¬ç”µè„‘è¿˜åœ¨192.168.1.xå­ç½‘ï¼Œä½†æ˜¯æ ‘è“æ´¾å·²ç»åˆ°äº†192.168.2.xå­ç½‘äº†ï¼Œæ‰€ä»¥è¿æ¥å¿…å®šæ˜¯æ–­å¼€çš„ï¼Œæˆ‘ä»¬å†æŠŠç”µè„‘ç«¯çš„Ethernetç«¯å£æ”¹å›192.168.2.xå­ç½‘ï¼Œå°±åˆèƒ½é‡æ–°è®¿é—®äº†\nå°†æ ‘è“æ´¾ä¸ç”µè„‘æ–­å¼€è¿æ¥ï¼Œæ’åˆ°è·¯ç”±å™¨çš„LANå£ä¸Šï¼Œåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œï¼Œè€Œä¸”ç”µè„‘ä¹Ÿèƒ½è®¿é—®æ ‘è“æ´¾äº†\nè®¾ç½®æ—è·¯ç”± ä»¥ä¸Šæ­¥éª¤åªæ˜¯å°†æ ‘è“æ´¾ä½œä¸ºä¸€ä¸ªç”¨ç½‘è®¾å¤‡åŠ å…¥äº†å®¶åº­çš„å±€åŸŸç½‘ï¼Œæˆ‘ä»¬çš„ç»ˆç«¯è®¾å¤‡è¿˜æ˜¯æ²¿ç€ä¸»è·¯ç”±è¿™æ¡çº¿è¿›è¡Œé€šä¿¡ï¼Œè¦æƒ³ä½œä¸ºæ—è·¯ç”±è¿˜éœ€è¦è¿›ä¸€æ­¥è®¾ç½®\nå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†Wifiçš„ç½‘å…³ä»è·¯ç”±å™¨ä¹‹å‰DHCPè‡ªåŠ¨åˆ†é…çš„åœ°å€æ”¹ä¸ºæ—è·¯ç”±æ ‘è“æ´¾å³å¯ï¼Œå‡è®¾æˆ‘çš„ä¸»è·¯ç”±å™¨IPåœ°å€ä¸º192.168.2.1ï¼Œæˆ‘çš„ç”µè„‘IPåœ°å€ä¸º192.168.2.54ï¼Œæˆ‘çš„æ ‘è“æ´¾çš„IPåœ°å€ä¸º192.168.2.66ï¼Œæˆ‘éœ€è¦è¿™ä¹ˆä¿®æ”¹ï¼š\nMacBookä¹Ÿä¸€æ ·\nåŒæ ·çš„iPhoneä¹Ÿå¯ä»¥è®¾ç½®ï¼Œè¿™é‡Œæˆ‘å°±ä¸æ”¾å›¾äº†\nå› ä¸ºæ€•ç‚¸ç½‘æˆ‘æš‚æ—¶å…ˆä½¿ç”¨è¿™ç§éä¾µå…¥å¼çš„è®¾ç½®ï¼Œå®ƒåªå½±å“æŠŠç½‘å…³è®¾ç½®ä¸ºè½¯è·¯ç”±çš„ç»ˆç«¯ï¼Œè¿™æ ·ä¸€æ—¦ç½‘åäº†åªå½±å“éƒ¨åˆ†è®¾å¤‡ï¼Œæˆ–è€…æˆ‘ä¿®æ”¹ä¸€ä¸‹ç½‘å…³ä¿®æ”¹åˆ°ä¸»è·¯ç”±å™¨çš„IPåœ°å€å°±å¯ä»¥äº†\nå®‰è£…æ’ä»¶ å—åˆ°éŸ©é£Talkçš„å¯å‘ï¼Œç”±äºåˆšå¼€å§‹æŠ˜è…¾è¿˜ä¸çŸ¥é“å“ªäº›æ’ä»¶å¥½ç”¨ï¼Œæˆ‘ä¹Ÿè§‰å¾—æˆ‘åº”è¯¥åˆ¶ä½œä¸€ä¸ªæ’ä»¶åº“\nå¸è½½æ’ä»¶ å¯ä»¥åœ¨System -\u003e Software -\u003e Installedä¸­å¸è½½æ’ä»¶\næˆ–è€…ä½¿ç”¨opkgåŒ…ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚\nopkg remove luci-app-samba å¯ä»¥ä½¿ç”¨è¿™æ¡å‘½ä»¤æ¥åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–é¡¹\nopkg remove --autoremove å®‰è£…æ’ä»¶ é¦–å…ˆéœ€è¦åœ¨Ubuntuä¸Šç¼–è¯‘æ’ä»¶\nmake menuconfig åœ¨LuCI -\u003e Applicationså¯ä»¥æŠŠå›ºä»¶å…¨é€‰ä¸Šï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ˜¯åšä¸ªå›ºä»¶åº“ï¼Œä¹‹åæœ‰å•¥éœ€æ±‚å°±è£…å•¥ã€‚é€‰æ‹©æ—¶åº”è¯¥æ¨¡å—åŒ–ï¼ŒæŒ‰ç©ºæ ¼è®©å‰é¢æ‹¬å·é‡Œå‡ºç°ä¸€ä¸ªMã€‚ä¿å­˜åå›åˆ°å‘½ä»¤è¡Œå¼€å§‹ç¼–è¯‘\nmake -j1 V=s ç¼–è¯‘å®Œæˆååœ¨bin\\packagesä¸­å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬ç¼–è¯‘çš„å…¨éƒ¨æ’ä»¶äº†ï¼Œè€Œä¸”éƒ½ä¸º.ipkæ ¼å¼\nå¸¸è§ä½¿ç”¨åœºæ™¯ å»å¹¿å‘Š æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰ luci-app-adguardhome é…ç½®å‚è€ƒï¼šã€éŸ©é£Talkã€‘Openwrtæ’ä»¶å¯¹å¹¿å‘Šè¯´ä¸ï¼Œæ€ä¹ˆåšï¼Ÿä¸¤æ¬¾çƒ­é—¨æ’ä»¶éšä½ ç”¨ï¼ å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº OpenVPN æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰ luci-app-openvpn luci-app-openvpn-server luci-i18n-openvpn-server-zh-cn luci-i18n-openvpn-zh-cn open-vpn-easy-rsa openvpn-openssl Wireguard Wireguardå› ä¸ºæ¯”OpenVPNè½»é‡åŒ–é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤æ˜¯æˆ‘ç›®å‰é¦–é€‰ æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰ kmod-wireguard luci-proto-wireguard wireguard-tools luci-app-wireguardï¼ˆå¯ä»¥ä¸é€‰ï¼Œè€Œä¸”åœ¨æˆ‘çš„menuconfigæ²¡æ‰¾åˆ°ï¼‰ è¯¦ç»†é…ç½®è§ï¼š ZeroTire æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰\nluci-app-zerotire é…ç½®å‚è€ƒï¼šã€éŸ©é£Talkã€‘Openwrtçš„Zerotieræ’ä»¶ç©æ³•ï¼Œå¼‚åœ°ç»„ç½‘ä¸æ±‚äººï¼Œå¤§è™šæ‹Ÿå±€åŸŸç½‘èµ°èµ·ï¼\næ–‡ä»¶ç®¡ç† æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§è¿™é‡Œï¼‰\nluci-app-filebrowserï¼šService -\u003e File Browser luci-app-sambaï¼šNAS -\u003e Network Sharesï¼Œæœ‰ä¸€ç‚¹è§†é¢‘é‡Œè¯´çš„ç‚¹å‡»Pathä¼šè¿›å…¥/luci/admin/system/fstabï¼Œä½†æ˜¯æˆ‘çš„menuconfigæ²¡æœ‰luci-app-fstabï¼Œå› æ­¤ä¼š404ï¼Œå¥½åœ¨å¦‚æœç¼–è¯‘äº†BaseSystem -\u003e block-mountçš„è¯è¿™ä¸ªurlï¼š/luci/admin/system/mountsè·Ÿè§†é¢‘é‡Œçš„æ˜¯ä¸€æ ·çš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸ªbug luci-app-filetransferï¼šSystem -\u003e File Transferï¼Œç”¨äºä¸Šä¼ ipkåŒ… é…ç½®å‚è€ƒï¼šã€éŸ©é£Talkã€‘Openwrtæ–‡ä»¶ç®¡ç†çš„ç©æ³•åˆé›†ï¼Œè¿™æœŸé¡ºä¾¿è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼\n",
  "wordCount" : "4271",
  "inLanguage": "zh",
  "datePublished": "2024-11-11T13:13:13-04:00",
  "dateModified": "2024-11-15T14:35:15-05:00",
  "author":{
    "@type": "Person",
    "name": "Kyxie"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kyxie.me/zh/blog/tech/router/raspberrypi-openwrt/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kunyang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kyxie.me/Favicon.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kyxie.me/zh/" accesskey="h" title="Home (Alt + H)">Home</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://kyxie.me/en/" title="EnglishğŸ‡¨ğŸ‡¦"
                            aria-label="EnglishğŸ‡¨ğŸ‡¦">EnglishğŸ‡¨ğŸ‡¦</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kyxie.me/zh/about" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://kyxie.me/zh/resume.pdf" title="ç®€å†">
                    <span>ç®€å†</span>
                </a>
            </li>
            <li>
                <a href="https://kyxie.me/zh/blog" title="åšå®¢">
                    <span>åšå®¢</span>
                </a>
            </li>
            <li>
                <a href="https://kyxie.me/zh/comment/comments" title="ç•™è¨€æ¿">
                    <span>ç•™è¨€æ¿</span>
                </a>
            </li>
            <li>
                <a href="https://kyxie.me/zh/search" title="æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kyxie.me/zh/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/">åšå®¢ ğŸ“’</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/tech/">æŠ€æœ¯ ğŸ”§</a>&nbsp;Â»&nbsp;<a href="https://kyxie.me/zh/blog/tech/router/">è·¯ç”± ğŸ›œ</a></div>
    <h1 class="post-title">
      ä½¿ç”¨æ ‘è“æ´¾4B&#43;å®‰è£…OpenWrtç”¨ä½œæ—è·¯ç”±
    </h1>
    <div class="post-meta">


<span title='2024-11-11 13:13:13 -0400 -0400'>2024-11-11</span>&nbsp;Â·&nbsp;9 åˆ†é’Ÿ&nbsp;Â·&nbsp;4271 å­—&nbsp;Â·&nbsp;Kyxie

</div>
  </header> <aside id="toc-container" class="toc-container wide">
        <div class="toc">
            <details  open>
                <summary accesskey="c" title="(Alt + C)">
                    <span class="details">ç›®å½•</span>
                </summary>

                <div class="inner"><ul>
                        <li>
                            <a href="#%e9%9c%80%e8%a6%81%e7%9a%84%e7%a1%ac%e4%bb%b6%e5%92%8c%e8%bd%af%e4%bb%b6" aria-label="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶</a><ul>
                                    
                        <li>
                            <a href="#%e7%a1%ac%e4%bb%b6" aria-label="ç¡¬ä»¶">ç¡¬ä»¶</a></li>
                        <li>
                            <a href="#%e8%bd%af%e4%bb%b6" aria-label="è½¯ä»¶">è½¯ä»¶</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e8%8e%b7%e5%be%97%e9%95%9c%e5%83%8f" aria-label="è·å¾—é•œåƒ">è·å¾—é•œåƒ</a><ul>
                                    
                        <li>
                            <a href="#%e4%b8%8b%e8%bd%bd%e9%95%9c%e5%83%8f" aria-label="ä¸‹è½½é•œåƒ">ä¸‹è½½é•œåƒ</a></li>
                        <li>
                            <a href="#%e7%bc%96%e8%af%91%e9%95%9c%e5%83%8f" aria-label="ç¼–è¯‘é•œåƒ">ç¼–è¯‘é•œåƒ</a><ul>
                                    
                        <li>
                            <a href="#%e7%ac%ac%e4%b8%80%e6%ac%a1%e7%bc%96%e8%af%91" aria-label="ç¬¬ä¸€æ¬¡ç¼–è¯‘">ç¬¬ä¸€æ¬¡ç¼–è¯‘</a></li>
                        <li>
                            <a href="#%e5%8d%95%e7%8b%ac%e7%bc%96%e8%af%91" aria-label="å•ç‹¬ç¼–è¯‘">å•ç‹¬ç¼–è¯‘</a></li></ul>
                        </li></ul>
                        </li>
                        <li>
                            <a href="#%e7%83%a7%e5%bd%95" aria-label="çƒ§å½•">çƒ§å½•</a><ul>
                                    
                        <li>
                            <a href="#windows" aria-label="Windows">Windows</a></li>
                        <li>
                            <a href="#macos" aria-label="MacOS">MacOS</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e8%bf%9e%e6%8e%a5%e8%b7%af%e7%94%b1%e5%99%a8" aria-label="è¿æ¥è·¯ç”±å™¨">è¿æ¥è·¯ç”±å™¨</a></li>
                        <li>
                            <a href="#%e8%ae%be%e7%bd%ae%e6%97%81%e8%b7%af%e7%94%b1" aria-label="è®¾ç½®æ—è·¯ç”±">è®¾ç½®æ—è·¯ç”±</a></li>
                        <li>
                            <a href="#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6" aria-label="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a><ul>
                                    
                        <li>
                            <a href="#%e5%8d%b8%e8%bd%bd%e6%8f%92%e4%bb%b6" aria-label="å¸è½½æ’ä»¶">å¸è½½æ’ä»¶</a></li>
                        <li>
                            <a href="#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6-1" aria-label="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e5%b8%b8%e8%a7%81%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="å¸¸è§ä½¿ç”¨åœºæ™¯">å¸¸è§ä½¿ç”¨åœºæ™¯</a><ul>
                                    
                        <li>
                            <a href="#%e5%8e%bb%e5%b9%bf%e5%91%8a" aria-label="å»å¹¿å‘Š">å»å¹¿å‘Š</a></li>
                        <li>
                            <a href="#%e5%a4%96%e7%bd%91%e8%ae%bf%e9%97%ae%e6%88%91%e7%9a%84windows%e5%8f%b0%e5%bc%8f%e6%9c%ba" aria-label="å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº">å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº</a><ul>
                                    
                        <li>
                            <a href="#openvpn" aria-label="OpenVPN">OpenVPN</a></li>
                        <li>
                            <a href="#wireguard" aria-label="Wireguard">Wireguard</a></li>
                        <li>
                            <a href="#zerotire" aria-label="ZeroTire">ZeroTire</a></li></ul>
                        </li>
                        <li>
                            <a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" aria-label="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†</a>
                        </li>
                    </ul>
                    </li>
                    </ul>
                </div>
            </details>
        </div>
    </aside>
    <script>
        let activeElement;
        let elements;
        window.addEventListener('DOMContentLoaded', function (event) {
            checkTocPosition();

            elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }, false);

        window.addEventListener('resize', function (event) {
            checkTocPosition();
        }, false);

        window.addEventListener('scroll', () => {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement) {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }, false);

        const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
        const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
        const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

        function checkTocPosition() {
            const width = document.body.scrollWidth;

            if (width - main - (toc * 2) - (gap * 4) > 0) {
                document.getElementById("toc-container").classList.add("wide");
            } else {
                document.getElementById("toc-container").classList.remove("wide");
            }
        }

        function getOffsetTop(element) {
            if (!element.getClientRects().length) {
                return 0;
            }
            let rect = element.getBoundingClientRect();
            let win = element.ownerDocument.defaultView;
            return rect.top + win.pageYOffset;
        }
    </script>
  <div class="post-content"><h3 id="éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶<a hidden class="anchor" aria-hidden="true" href="#éœ€è¦çš„ç¡¬ä»¶å’Œè½¯ä»¶">#</a></h3>
<h4 id="ç¡¬ä»¶">ç¡¬ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç¡¬ä»¶">#</a></h4>
<ul>
<li>ä¸€å°æœ‰ç½‘çº¿æ¥å£çš„ç”µè„‘</li>
<li>å†…å­˜2GBä»¥ä¸Šçš„æ ‘è“æ´¾4B+</li>
<li>8GBä»¥ä¸Šçš„å°SDå¡ï¼Œå¯ä»¥æ’åœ¨æ ‘è“æ´¾ä¸Š</li>
<li>SDå¡çš„è¯»å¡å™¨</li>
<li>ä¸€æ ¹ç½‘çº¿</li>
<li>æ˜¾ç¤ºå™¨ï¼ˆéå¿…é¡»ï¼‰ï¼ŒMicro USB - HDMIçº¿ï¼ˆéå¿…é¡»ï¼‰</li>
</ul>
<h4 id="è½¯ä»¶">è½¯ä»¶<a hidden class="anchor" aria-hidden="true" href="#è½¯ä»¶">#</a></h4>
<ul>
<li><a href="https://etcher.balena.io/#download-etcher">Balena Etcher</a>ï¼ŒMacBookç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸‹è½½è¿™ä¸ªï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨å‘½ä»¤è¡Œä»£æ›¿</li>
<li>VM Virtual Boxå’ŒUbuntuè™šæ‹Ÿæœºï¼Œéå¿…é¡»ï¼Œç”¨äºç¼–è¯‘OpenWrtå›ºä»¶ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹è½½åˆ«äººç¼–è¯‘å¥½çš„å›ºä»¶ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç¼–è¯‘60GBå°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¸Œæœ›ç¼–è¯‘ä¸€ä¸ªå›ºä»¶åº“ï¼Œæƒ³æŠŠæ‰€æœ‰åŠŸèƒ½å…¨éƒ¨é€‰ä¸Šï¼Œ60GBä¸å¤Ÿï¼Œå»ºè®®åˆ†é…128GBå‚¨å­˜</li>
<li>SecureCRTæˆ–PuTTyï¼Œéå¿…é¡»ï¼Œä¸çŸ¥é“å¤§å®¶ç”¨ä»€ä¹ˆå‘½ä»¤è¡Œç»ˆç«¯ï¼Œä½†æ˜¯æˆ‘MacBookå’ŒWindowséƒ½æ˜¯ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œç»ˆç«¯</li>
</ul>
<h3 id="è·å¾—é•œåƒ">è·å¾—é•œåƒ<a hidden class="anchor" aria-hidden="true" href="#è·å¾—é•œåƒ">#</a></h3>
<h4 id="ä¸‹è½½é•œåƒ">ä¸‹è½½é•œåƒ<a hidden class="anchor" aria-hidden="true" href="#ä¸‹è½½é•œåƒ">#</a></h4>
<p>å¯ä»¥ä»OpenWrtçš„<a href="https://openwrt.org/toh/views/toh_fwdownload">å®˜ç½‘</a>ä¸‹è½½é•œåƒ</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/a2f4260c7818d9c1b8c826a37f6aab0b.png" alt="OpenWrt Images"  />
</p>
<h4 id="ç¼–è¯‘é•œåƒ">ç¼–è¯‘é•œåƒ<a hidden class="anchor" aria-hidden="true" href="#ç¼–è¯‘é•œåƒ">#</a></h4>
<p>ä½†æˆ‘æ˜¯æ¯”è¾ƒèƒ½æŠ˜è…¾çš„ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¸ªä»“åº“ï¼š<a href="https://github.com/coolsnowwolf/lede">Lean</a>ï¼Œreadmeæœ‰æ¯”è¾ƒè¯¦ç»†çš„ç¼–è¯‘æ­¥éª¤ï¼Œäºæ˜¯å†³å®šè‡ªå·±å°è¯•ä¸€ä¸‹</p>
<h5 id="ç¬¬ä¸€æ¬¡ç¼–è¯‘">ç¬¬ä¸€æ¬¡ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ¬¡ç¼–è¯‘">#</a></h5>
<ul>
<li>
<p>é¦–å…ˆåœ¨Ubuntuä¸Šclone repo</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>https://github.com/coolsnowwolf/lede.git
</span></span></code></pre></div></li>
<li>
<p>å®‰è£…ä¾èµ–åŒ…</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update -y
</span></span><span style="display:flex;"><span>sudo apt full-upgrade -y
</span></span><span style="display:flex;"><span>sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python3 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev
</span></span></code></pre></div></li>
<li>
<p>æ›´æ–°feedå¹¶é€‰æ‹©é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd lede
</span></span><span style="display:flex;"><span>./scripts/feeds update -a
</span></span><span style="display:flex;"><span>./scripts/feeds install -a
</span></span><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div></li>
<li>
<p><a id="menuconfig"></a>è¾“å…¥è¿™ä¸ªå‘½ä»¤åå°±å¼€å¯äº†é…ç½®é¡µé¢ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾4Bï¼Œæˆ‘ç›®å‰çš„å¸¸ç”¨åœºæ™¯æœ‰è§<a href="#%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">è¿™é‡Œ</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># ç¼–è¯‘çš„ç›®æ ‡ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetSystem</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Broadcom BCM27xx</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Subtarget</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">BCM2711 boards (64 bit)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetProfile</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Raspberry Pi 4B/400/4CM (64bit)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é•œåƒå‚æ•°</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TargetImages</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ext4</span> <span style="color:#75715e"># ext4æ ¼å¼çš„å›ºä»¶å¯æ–¹ä¾¿åœ°è°ƒæ•´åˆ†åŒºå¤§å°</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">squashfs</span> <span style="color:#75715e"># squashfsæ ¼å¼çš„å›ºä»¶å¯æ¢å¤å‡ºå‚è®¾ç½®</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">KernelPartitionSize</span>: <span style="color:#ae81ff">64</span> <span style="color:#75715e"># bootåˆ†åŒºå¤§å°ä¸º64M</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">RootFilesystemPartitionSize</span>: <span style="color:#ae81ff">512</span> <span style="color:#75715e"># rootåˆ†åŒºå¤§å°ä¸º512M</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯é€‰å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">BaseSystem</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">block-mount</span> <span style="color:#75715e"># åœ¨LuCIç•Œé¢æ·»åŠ &lt;æŒ‚è½½ç‚¹&gt;èœå•</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">blockd</span> <span style="color:#75715e"># è‡ªåŠ¨æŒ‚è½½è®¾å¤‡</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">wireless-tools</span> <span style="color:#75715e"># æ— çº¿æ‰©å±•å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Administration</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">htop</span> <span style="color:#75715e"># æ·»åŠ htopå‘½ä»¤</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Firmware</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">xxx</span> <span style="color:#75715e"># é€‰æ‹©ä½ éœ€è¦çš„ç½‘å¡å›ºä»¶ï¼Œé»˜è®¤å³å¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ–‡ä»¶ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">KernelModules</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Filesystems</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-ext4</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-ntfs</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-squashfs</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fs-vfat</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-fuse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># ç½‘å¡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">NetworkDevices</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-xxx</span> <span style="color:#75715e"># æœ‰çº¿ç½‘å¡æ”¯æŒï¼Œè·Ÿä»¥ä¸‹å‡ é¡¹å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§æ·»åŠ </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">NetworkSupport</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">kmod-wireguard</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">WirelessDrivers</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">kmod-rt2800-usb</span> <span style="color:#75715e"># æ·»åŠ Ralink RT5370èŠ¯ç‰‡çš„USBæ— çº¿ç½‘å¡é©±åŠ¨</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">USBSupport</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">kmod-usb-net</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-asix</span> <span style="color:#75715e"># æ·»åŠ æ”¯æŒäºšä¿¡çš„æœ‰çº¿ç½‘å¡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-asix-ax88179</span> <span style="color:#75715e"># æ·»åŠ USB3.0çš„æœ‰çº¿ç½‘å¡èŠ¯ç‰‡AX88179çš„é©±åŠ¨</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-rtl8152</span> <span style="color:#75715e"># æ·»åŠ USB2/3çš„æœ‰çº¿ç½‘å¡RTL8152/3èŠ¯ç‰‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-net-sr9700</span> <span style="color:#75715e"># æ·»åŠ USB2.0çš„æœ‰çº¿ç½‘å¡SR9700èŠ¯ç‰‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">kmod-usb-core</span> <span style="color:#75715e"># å¯ç”¨USBæ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-hid</span> <span style="color:#75715e"># USBé”®é¼ æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-ohci</span> <span style="color:#75715e"># æ·»åŠ OHCIæ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-storage</span> <span style="color:#75715e"># å¯ç”¨USBå­˜å‚¨</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-storage-extras</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb-uhci</span> <span style="color:#75715e"># æ·»åŠ UHCIæ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb2</span> <span style="color:#75715e"># å¼€å¯USB2æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  	  - <span style="color:#ae81ff">kmod-usb3</span> <span style="color:#75715e"># å¼€å¯USB3æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># LuCIè®¾ç½®</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">LuCI</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Collections</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci</span> <span style="color:#75715e"># å¼€å¯luci</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Modules</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Translations</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">Chinese(zh-cn)</span> <span style="color:#75715e"># ä¸­æ–‡æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Themes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-theme-agron</span> <span style="color:#75715e"># æ·»åŠ ä¸»é¢˜</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># LuCIåº”ç”¨</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Applications</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-adguardhome</span> <span style="color:#75715e"># å»å¹¿å‘Š</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-alist</span> <span style="color:#75715e"># æ–‡ä»¶å…±äº«</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-aria2</span> <span style="color:#75715e"># ä¸‹è½½å·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-advanced-reoot</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-filebrowser</span> <span style="color:#75715e"># æ–‡ä»¶ç®¡ç†</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-filetransfer</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-firewall</span> <span style="color:#75715e"># é˜²ç«å¢™</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-frps</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-frpc</span> <span style="color:#75715e"># å†…ç½‘ç©¿é€</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-hd-idle</span> <span style="color:#75715e"># ç¡¬ç›˜ä¼‘çœ </span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-lucky</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-opkg</span> <span style="color:#75715e"># è½¯ä»¶åŒ…</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-openvpn</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-openvpn-server</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-qos</span> <span style="color:#75715e"># æœåŠ¡è´¨é‡</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-samba</span> <span style="color:#75715e"># ç½‘ç»œå…±äº«</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-shadowsocks-libev</span> <span style="color:#75715e"># ç¿»å¢™è½¯ä»¶</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-upnp</span> <span style="color:#75715e"># UPnPæœåŠ¡</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">luci-app-wol</span> <span style="color:#75715e"># ç½‘ç»œå”¤é†’</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Protocols</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">luci-protocol-wireguard</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç½‘ç»œå·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Network</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">DownloadManager</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ariang</span> <span style="color:#75715e"># Aria2ç®¡ç†é¡µé¢</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">FileTransfer</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">Aria2Configuration</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#75715e">***</span> <span style="color:#75715e"># é€‰æ‹©Aria2æ”¯æŒçš„åŠŸèƒ½</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">curl</span> <span style="color:#75715e"># æ·»åŠ curlå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">wget</span> <span style="color:#75715e"># æ·»åŠ wgetå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VPN</span>:
</span></span><span style="display:flex;"><span>  	- <span style="color:#ae81ff">wireguard-tools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®ç”¨å·¥å…·</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Utilities</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Compression</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">bsdtar</span> <span style="color:#75715e"># taræ‰“åŒ…å·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">gzip</span> <span style="color:#75715e"># GZ å‹ç¼©å¥—ä»¶</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Disc</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">fdisk</span> <span style="color:#75715e"># ç£ç›˜åˆ†åŒºå·¥å…·</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">lsblk</span> <span style="color:#75715e"># ç£ç›˜æŸ¥çœ‹å·¥å…·</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Filesystem</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ntfs-3g</span> <span style="color:#75715e"># NTFSè¯»å†™æ”¯æŒ</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">resize2fs</span> <span style="color:#75715e"># åˆ†åŒºå¤§å°è°ƒæ•´</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Terminal</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">screen</span> <span style="color:#75715e"># æ·»åŠ screen</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">piciutils</span> <span style="color:#75715e"># æ·»åŠ lspciå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">usbutils</span> <span style="color:#75715e"># æ·»åŠ lsusbå‘½ä»¤</span>
</span></span></code></pre></div></li>
<li>
<p>é…ç½®å®Œæˆåé€‰æ‹©Saveï¼Œä¼šä¿å­˜ä¸ºä¸€ä¸ª<code>.config</code>æ–‡ä»¶ã€‚åœ¨æœ€åä¸€æ­¥å®‰è£…ä¹‹å‰è¿˜éœ€è¦å®‰è£…screenï¼Œç”¨äºåˆ›å»ºæŒä¹…ä¼šè¯ï¼Œå¦åˆ™å¦‚æœä¸å°å¿ƒå…³äº†sshä¹‹å‰ç¼–è¯‘çš„å°±éƒ½æ²¡äº†ï¼ˆä½ çŒœæˆ‘æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼‰</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install screen
</span></span><span style="display:flex;"><span>screen -S buildlede
</span></span></code></pre></div></li>
<li>
<p>æœ€åæ‰§è¡Œå‘½ä»¤ç”¨8ä¸ªçº¿ç¨‹ä¸‹è½½dlåº“ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘ç”¨1ä¸ªçº¿ç¨‹ç¼–è¯‘ã€‚åœ¨è¿™é‡Œä¸€å¼€å§‹æˆ‘ç”¨çš„AWSçš„Ubuntuä¸€ç›´ä¸‹ä¸ä¸‹æ¥ï¼Œæ²¡æœ‰åŠæ³•æ¢æˆäº†æœ¬åœ°çš„Ubuntuè™šæ‹Ÿæœºæ‰ä¸‹è½½ç¼–è¯‘æˆåŠŸ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make download -j8
</span></span><span style="display:flex;"><span>make V<span style="color:#f92672">=</span>s -j1
</span></span></code></pre></div></li>
<li>
<p>ç„¶åå°±æ˜¯ç­‰å¾…ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆååœ¨<code>bin\targets</code>å¯ä»¥é€‰æ‹©<code>openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz</code>è¿™ä¸ªç‰ˆæœ¬è¿›è¡Œçƒ§å½•</p>
</li>
</ul>
<h5 id="å•ç‹¬ç¼–è¯‘">å•ç‹¬ç¼–è¯‘<a hidden class="anchor" aria-hidden="true" href="#å•ç‹¬ç¼–è¯‘">#</a></h5>
<p>æœ‰æ—¶å€™ç”¨ç€ç”¨ç€å‘ç°æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å•ç‹¬ç¼–è¯‘ä¸€ä¸ªæ’ä»¶</p>
<ul>
<li>
<p>ç¼–è¾‘<code>.config</code>æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div></li>
<li>
<p>æ‰¾åˆ°æˆ‘ä»¬æƒ³å•ç‹¬ç¼–è¯‘çš„æ’ä»¶ï¼Œæ¯”å¦‚<code>luci-app-diskman</code>ï¼Œè¿™æ˜¯ä¸ªç®¡ç†è·¯ç”±å™¨ä¸Šçš„ç£ç›˜å’Œåˆ†åŒºçš„æ’ä»¶ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘é€‰æ‹©ä¸º<code>[*]</code>ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªå†…ç½®æ¨¡å—ç¼–è¯‘ï¼Œä¸å¯ä»¥å¸è½½ã€‚è¿™æ¬¡çš„è¯æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸º<code>[M]</code>ï¼Œæ„æ€æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—ç¼–è¯‘</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/68ce803d682f4538656ee9062ba819f8.png" alt="Compile Module"  />
</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make package/luci-app-diskman/compile V<span style="color:#f92672">=</span>s
</span></span></code></pre></div></li>
<li>
<p>ç¼–è¯‘å®Œæˆååœ¨<code>/bin/packages/aarch64_cortex-a72/luci</code>æ–‡ä»¶å¤¹ä¸‹èƒ½æ‰¾åˆ°<code>luci-app-diskman_v0.2.11_all.ipk</code></p>
</li>
<li>
<p>æ‰“å¼€openwrtï¼ŒSystem -&gt; File Transferé€‰æ‹©æ–‡ä»¶ä¸Šä¼ ï¼Œå³ä¸‹è§’å®‰è£…å°±å¯ä»¥äº†</p>
</li>
<li>
<p>æˆ‘å®‰è£…å®ŒåOpenWrtæ²¡æœ‰ç«‹åˆ»å‡ºç°æ–°å®‰è£…çš„æ’ä»¶ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´æ‰å‡ºç°çš„</p>
</li>
</ul>
<p>å¦‚æœè¦å•ç‹¬ç¼–è¯‘å†…æ ¸æ¨¡å—ï¼Œæ¯”å¦‚<code>kmod-wireguard</code>ï¼Œå¯ä»¥åœ¨kernel moduleä¸­é€‰ä¸­å®ƒä¸º[M]ï¼Œç„¶åè¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make package/kernel/linux/compile V<span style="color:#f92672">=</span>s
</span></span></code></pre></div><p>å¾ˆå¿«ç¼–è¯‘å°±å®Œæˆäº†ï¼Œç¼–è¯‘å‡ºæ¥çš„åŒ…åœ¨<code>bin/packages/&lt;target&gt;/&lt;package-repo&gt;/kmod-wireguard_xxx.ipk</code></p>
<h3 id="çƒ§å½•">çƒ§å½•<a hidden class="anchor" aria-hidden="true" href="#çƒ§å½•">#</a></h3>
<h4 id="windows">Windows<a hidden class="anchor" aria-hidden="true" href="#windows">#</a></h4>
<p>å¯ä»¥ä½¿ç”¨<a href="https://etcher.balena.io/#download-etcher">Balena Etcher</a>æˆ–è€…å…¶ä»–çš„disk imagerè½¯ä»¶å°†imageçƒ§å½•åˆ°SDå¡ä¸­ï¼Œéå¸¸ç®€å•ï¼ŒæŒ‰é¡ºåºä¸€æ­¥ä¸€æ­¥æ¥å³å¯</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/ab0a5f269428a6dd01000e95d5797b90.png" alt="Balena Etcher for Windows"  />
</p>
<h4 id="macos">MacOS<a hidden class="anchor" aria-hidden="true" href="#macos">#</a></h4>
<p>MacOSä¹Ÿå¯ä»¥ä½¿ç”¨Balena Etcherå°†é•œåƒå¯¼å…¥åˆ°SDå¡ä¸­ï¼Œä½†æ˜¯æˆ‘ä¸å–œæ¬¢ä¸‹ä¹±ä¸ƒå…«ç³Ÿçš„è½¯ä»¶ï¼Œå¹²è„†ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œäº†</p>
<ul>
<li>
<p>æ‰¾åˆ°SDå¡çš„ç£ç›˜ç¼–å·ï¼Œè¿™é‡Œæˆ‘çš„SDå¡ç£ç›˜ä¸º<code>/dev/disk4</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil list
</span></span><span style="display:flex;"><span>/dev/disk4 <span style="color:#f92672">(</span>external, physical<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
</span></span><span style="display:flex;"><span>   0:     FDisk_partition_scheme                        *7.9 GB     disk4
</span></span><span style="display:flex;"><span>   1:             Windows_FAT_32 BOOT                    67.1 MB    disk4s1
</span></span><span style="display:flex;"><span>   2:                      Linux                         109.1 MB   disk4s2
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">(</span>free space<span style="color:#f92672">)</span>                         7.7 GB     -
</span></span></code></pre></div><p>ç”±äºæˆ‘è¿™é‡Œä»¥å‰è£…è¿‡ä¸€ä¸ªä¸å¸¦GUIç‰ˆæœ¬çš„OpenWrtï¼ŒSDå¡å¤šäº†å‡ ä¸ªåˆ†åŒºï¼Œè¿™æ¬¡æ‰“ç®—é‡æ–°è£…ä¸€ä¸ªå¸¦ç€GUIçš„</p>
</li>
<li>
<p>é¦–å…ˆæ¢å¤åˆ†åŒºï¼Œè¿™ä¸ªå‘½ä»¤åŒæ—¶æŠŠSDå¡è¿›è¡Œæ ¼å¼åŒ–</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil eraseDisk FAT32 SDCARD MBRFormat /dev/disk4
</span></span></code></pre></div><p>æ¢å¤åˆ†åŒºä¹‹å</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil list
</span></span><span style="display:flex;"><span>/dev/disk4 <span style="color:#f92672">(</span>external, physical<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
</span></span><span style="display:flex;"><span>   0:     FDisk_partition_scheme                        *7.9 GB     disk4
</span></span><span style="display:flex;"><span>   1:                 DOS_FAT_32 SDCARD                  7.9 GB     disk4s1
</span></span></code></pre></div></li>
<li>
<p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¸è½½ï¼ˆä½†ä¸ç§»é™¤ï¼‰ SD å¡ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºbusy</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>diskutil unmountDisk /dev/disk4
</span></span><span style="display:flex;"><span>Unmount of all volumes on disk4 was successful
</span></span></code></pre></div></li>
<li>
<p>è§£å‹ä¸‹è½½çš„image</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gunzip ./openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img.gz
</span></span></code></pre></div></li>
<li>
<p>ä½¿ç”¨ <code>dd</code> å†™å…¥è§£å‹åçš„ <code>.img</code> æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸€æ­¥åƒä¸‡ä¸è¦æŠ„é”™äº†ç£ç›˜ç¼–å·ï¼Œå¦åˆ™ä¼¤å®³ä¸å¯é€†ï¼Œ<code>dd</code>æ˜¯ä¸ªå¾ˆå¼ºçš„å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/Users/kunyangxie/Desktop/openwrt-bcm27xx-bcm2711-rpi-4-squashfs-factory.img of<span style="color:#f92672">=</span>/dev/disk4 bs<span style="color:#f92672">=</span>1M status<span style="color:#f92672">=</span>progress
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">286261248</span> bytes <span style="color:#f92672">(</span><span style="color:#ae81ff">286</span> MB, <span style="color:#ae81ff">273</span> MiB<span style="color:#f92672">)</span> transferred 69.070s, <span style="color:#ae81ff">4144</span> kB/s
</span></span><span style="display:flex;"><span>275+1 records in
</span></span><span style="display:flex;"><span>275+1 records out
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">288454957</span> bytes transferred in 69.735447 secs <span style="color:#f92672">(</span><span style="color:#ae81ff">4136418</span> bytes/sec<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>å¦‚æœä¸æŠ¥é”™ä¸€èˆ¬å°±æ˜¯æˆåŠŸäº†</p>
</li>
<li>
<p>æœ€åå°†SDå¡ä»ç”µè„‘æ‹”å‡ºï¼Œæ’åˆ°æ ‘è“æ´¾ä¸Šï¼Œå¯åŠ¨æ ‘è“æ´¾ï¼Œè¿™æ—¶ä½¿ç”¨ç½‘çº¿å°†æ ‘è“æ´¾çš„ä»¥å¤ªç½‘æ¥å£å’Œç”µè„‘çš„ä»¥å¤ªç½‘æ¥å£ç›¸è¿ã€‚ç”±äºOpenWrt é»˜è®¤å°†æ ‘è“æ´¾çš„<code>eth0</code>æ¥å£æ¡¥æ¥åˆ°<code>br-lan</code>å¹¶ä½¿ç”¨ IP åœ°å€ <code>192.168.1.1</code>ï¼Œæˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹ç”µè„‘ç«¯çš„Ethernetæ¥å£æ˜¯å¦ä¹Ÿåœ¨<code>192.168.1.x</code>çš„å­ç½‘ï¼Œxå¯ä»¥é€‰2 -  255çš„éšä¾¿ä¸€ä¸ªæ•°</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/2779ee13253f5ef403e70bed2319c428.png" alt="IP Config"  />
</p>
<p>å½“æ ‘è“æ´¾å°±è·Ÿç”µè„‘åœ¨ç›¸åŒå­ç½‘åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>192.168.1.1</code>ï¼Œå°±èƒ½ç™»å½•åˆ°OpenWrtçš„GUIï¼ˆLuCIï¼‰äº†ï¼Œé»˜è®¤ç”¨æˆ·åå’Œå¯†ç æ˜¯<code>root</code>å’Œ<code>password</code></p>
</li>
<li>
<p>å¤§åŠŸå‘Šæˆäº†</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/80b4b9243748b380bdb4ca2dc581dd9c.png" alt="Initial Page"  />
</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/e34987940f77787e00bb09a1f7d6e8e2.png" alt="Status Page"  />
</p>
</li>
</ul>
<h3 id="è¿æ¥è·¯ç”±å™¨">è¿æ¥è·¯ç”±å™¨<a hidden class="anchor" aria-hidden="true" href="#è¿æ¥è·¯ç”±å™¨">#</a></h3>
<ul>
<li>
<p>æˆ‘å®¶ä¸»è·¯ç”±å™¨ä½¿ç”¨çš„å­ç½‘ä¸º<code>192.168.2.x</code>ï¼Œéœ€è¦å°†æ ‘è“æ´¾æ”¹ä¸ºè¿™ä¸ªå­ç½‘ä¸‹ï¼ˆå½“ç„¶å¦‚æœä¸»è·¯ç”±å™¨å­ç½‘ä¸º<code>192.168.1.x</code>çš„è¯å°±ä¸ç”¨å¤šæŠ˜è…¾è¿™ä¸€æ­¥äº†ï¼‰ã€‚æˆ‘ä»¬å…ˆç¦ç”¨æ¡¥æ¥æ¨¡å¼å’Œä¿®æ”¹IPåœ°å€</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/network
</span></span></code></pre></div><p>ä¿®æ”¹æ–‡ä»¶ä¸º</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config interface &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option device &#39;eth0&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option proto &#39;static&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option ipaddr &#39;192.168.2.66&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option netmask &#39;255.255.255.0&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option gateway &#39;192.168.2.1&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option dns &#39;192.168.2.1&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option ip6assign &#39;60&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>ç¦ç”¨DHCPï¼Œé˜²æ­¢è·Ÿä¸»è·¯ç”±å™¨çš„DHCPå†²çª</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/dhcp
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config dhcp &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option interface &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option ignore &#39;1&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>æ£€æŸ¥é˜²ç«å¢™é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/config/firewall
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">config zone</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option name &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">list network &#39;lan&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option input &#39;ACCEPT&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option output &#39;ACCEPT&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">option forward &#39;ACCEPT&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>åº”ç”¨è®¾ç½®</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/etc/init.d/network restart
</span></span></code></pre></div></li>
<li>
<p>è¿™æ—¶ç”±äºæˆ‘ä»¬ç”µè„‘è¿˜åœ¨<code>192.168.1.x</code>å­ç½‘ï¼Œä½†æ˜¯æ ‘è“æ´¾å·²ç»åˆ°äº†<code>192.168.2.x</code>å­ç½‘äº†ï¼Œæ‰€ä»¥è¿æ¥å¿…å®šæ˜¯æ–­å¼€çš„ï¼Œæˆ‘ä»¬å†æŠŠç”µè„‘ç«¯çš„Ethernetç«¯å£æ”¹å›<code>192.168.2.x</code>å­ç½‘ï¼Œå°±åˆèƒ½é‡æ–°è®¿é—®äº†</p>
</li>
<li>
<p>å°†æ ‘è“æ´¾ä¸ç”µè„‘æ–­å¼€è¿æ¥ï¼Œæ’åˆ°è·¯ç”±å™¨çš„LANå£ä¸Šï¼Œåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œï¼Œè€Œä¸”ç”µè„‘ä¹Ÿèƒ½è®¿é—®æ ‘è“æ´¾äº†</p>
</li>
</ul>
<h3 id="è®¾ç½®æ—è·¯ç”±">è®¾ç½®æ—è·¯ç”±<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®æ—è·¯ç”±">#</a></h3>
<p>ä»¥ä¸Šæ­¥éª¤åªæ˜¯å°†æ ‘è“æ´¾ä½œä¸ºä¸€ä¸ªç”¨ç½‘è®¾å¤‡åŠ å…¥äº†å®¶åº­çš„å±€åŸŸç½‘ï¼Œæˆ‘ä»¬çš„ç»ˆç«¯è®¾å¤‡è¿˜æ˜¯æ²¿ç€ä¸»è·¯ç”±è¿™æ¡çº¿è¿›è¡Œé€šä¿¡ï¼Œè¦æƒ³ä½œä¸ºæ—è·¯ç”±è¿˜éœ€è¦è¿›ä¸€æ­¥è®¾ç½®</p>
<ul>
<li>
<p>å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†Wifiçš„ç½‘å…³ä»è·¯ç”±å™¨ä¹‹å‰DHCPè‡ªåŠ¨åˆ†é…çš„åœ°å€æ”¹ä¸ºæ—è·¯ç”±æ ‘è“æ´¾å³å¯ï¼Œå‡è®¾æˆ‘çš„ä¸»è·¯ç”±å™¨IPåœ°å€ä¸º<code>192.168.2.1</code>ï¼Œæˆ‘çš„ç”µè„‘IPåœ°å€ä¸º<code>192.168.2.54</code>ï¼Œæˆ‘çš„æ ‘è“æ´¾çš„IPåœ°å€ä¸º<code>192.168.2.66</code>ï¼Œæˆ‘éœ€è¦è¿™ä¹ˆä¿®æ”¹ï¼š</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/ebc48f4926e3e6a4c7ac32105e507350.png" alt="Windows Configure Gateway"  />
</p>
</li>
<li>
<p>MacBookä¹Ÿä¸€æ ·</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/0e7163529845eb6e94424df952cb2c44.png" alt="MacBook Configure Gateway"  />
</p>
<p><img loading="lazy" src="https://e8dd19b.webp.li/2024/11/2bac0f8e0a365ae7e9d7cc020f59d443.png" alt="MacBook Configure DNS"  />
</p>
</li>
<li>
<p>åŒæ ·çš„iPhoneä¹Ÿå¯ä»¥è®¾ç½®ï¼Œè¿™é‡Œæˆ‘å°±ä¸æ”¾å›¾äº†</p>
</li>
<li>
<p>å› ä¸ºæ€•ç‚¸ç½‘æˆ‘æš‚æ—¶å…ˆä½¿ç”¨è¿™ç§éä¾µå…¥å¼çš„è®¾ç½®ï¼Œå®ƒåªå½±å“æŠŠç½‘å…³è®¾ç½®ä¸ºè½¯è·¯ç”±çš„ç»ˆç«¯ï¼Œè¿™æ ·ä¸€æ—¦ç½‘åäº†åªå½±å“éƒ¨åˆ†è®¾å¤‡ï¼Œæˆ–è€…æˆ‘ä¿®æ”¹ä¸€ä¸‹ç½‘å…³ä¿®æ”¹åˆ°ä¸»è·¯ç”±å™¨çš„IPåœ°å€å°±å¯ä»¥äº†</p>
</li>
</ul>
<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…æ’ä»¶">#</a></h3>
<p>å—åˆ°<a href="https://www.youtube.com/watch?v=BSsBTSQfEQE&amp;list=PLTI5d7Gwez7ri29l5OOOxoWbxooGqXzMR&amp;index=5">éŸ©é£Talk</a>çš„å¯å‘ï¼Œç”±äºåˆšå¼€å§‹æŠ˜è…¾è¿˜ä¸çŸ¥é“å“ªäº›æ’ä»¶å¥½ç”¨ï¼Œæˆ‘ä¹Ÿè§‰å¾—æˆ‘åº”è¯¥åˆ¶ä½œä¸€ä¸ªæ’ä»¶åº“</p>
<h4 id="å¸è½½æ’ä»¶">å¸è½½æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å¸è½½æ’ä»¶">#</a></h4>
<ul>
<li>
<p>å¯ä»¥åœ¨System -&gt; Software -&gt; Installedä¸­å¸è½½æ’ä»¶</p>
</li>
<li>
<p>æˆ–è€…ä½¿ç”¨<code>opkg</code>åŒ…ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>opkg remove luci-app-samba
</span></span></code></pre></div></li>
<li>
<p>å¯ä»¥ä½¿ç”¨è¿™æ¡å‘½ä»¤æ¥åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–é¡¹</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>opkg remove --autoremove
</span></span></code></pre></div></li>
</ul>
<h4 id="å®‰è£…æ’ä»¶-1">å®‰è£…æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…æ’ä»¶-1">#</a></h4>
<ul>
<li>
<p>é¦–å…ˆéœ€è¦åœ¨Ubuntuä¸Šç¼–è¯‘æ’ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make menuconfig
</span></span></code></pre></div><p>åœ¨LuCI -&gt; Applicationså¯ä»¥æŠŠå›ºä»¶å…¨é€‰ä¸Šï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ˜¯åšä¸ªå›ºä»¶åº“ï¼Œä¹‹åæœ‰å•¥éœ€æ±‚å°±è£…å•¥ã€‚é€‰æ‹©æ—¶åº”è¯¥æ¨¡å—åŒ–ï¼ŒæŒ‰ç©ºæ ¼è®©å‰é¢æ‹¬å·é‡Œå‡ºç°ä¸€ä¸ªMã€‚ä¿å­˜åå›åˆ°å‘½ä»¤è¡Œå¼€å§‹ç¼–è¯‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make -j1 V<span style="color:#f92672">=</span>s
</span></span></code></pre></div></li>
<li>
<p>ç¼–è¯‘å®Œæˆååœ¨<code>bin\packages</code>ä¸­å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬ç¼–è¯‘çš„å…¨éƒ¨æ’ä»¶äº†ï¼Œè€Œä¸”éƒ½ä¸º<code>.ipk</code>æ ¼å¼</p>
</li>
</ul>
<h3 id="å¸¸è§ä½¿ç”¨åœºæ™¯">å¸¸è§ä½¿ç”¨åœºæ™¯<a hidden class="anchor" aria-hidden="true" href="#å¸¸è§ä½¿ç”¨åœºæ™¯">#</a></h3>
<h4 id="å»å¹¿å‘Š">å»å¹¿å‘Š<a hidden class="anchor" aria-hidden="true" href="#å»å¹¿å‘Š">#</a></h4>
<ul>
<li>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰
<ul>
<li>luci-app-adguardhome</li>
</ul>
</li>
<li>é…ç½®å‚è€ƒï¼š<a href="https://www.youtube.com/watch?v=8VBvSnuQfiI&amp;list=PLTI5d7Gwez7ri29l5OOOxoWbxooGqXzMR&amp;index=7">ã€éŸ©é£Talkã€‘Openwrtæ’ä»¶å¯¹å¹¿å‘Šè¯´ä¸ï¼Œæ€ä¹ˆåšï¼Ÿä¸¤æ¬¾çƒ­é—¨æ’ä»¶éšä½ ç”¨ï¼</a></li>
</ul>
<h4 id="å¤–ç½‘è®¿é—®æˆ‘çš„windowså°å¼æœº">å¤–ç½‘è®¿é—®æˆ‘çš„Windowså°å¼æœº<a hidden class="anchor" aria-hidden="true" href="#å¤–ç½‘è®¿é—®æˆ‘çš„windowså°å¼æœº">#</a></h4>
<h5 id="openvpn">OpenVPN<a hidden class="anchor" aria-hidden="true" href="#openvpn">#</a></h5>
<ul>
<li>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰
<ul>
<li>luci-app-openvpn</li>
<li>luci-app-openvpn-server</li>
<li>luci-i18n-openvpn-server-zh-cn</li>
<li>luci-i18n-openvpn-zh-cn</li>
<li>open-vpn-easy-rsa</li>
<li>openvpn-openssl</li>
</ul>
</li>
</ul>
<h5 id="wireguard">Wireguard<a hidden class="anchor" aria-hidden="true" href="#wireguard">#</a></h5>
<ul>
<li>Wireguardå› ä¸ºæ¯”OpenVPNè½»é‡åŒ–é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤æ˜¯æˆ‘ç›®å‰é¦–é€‰</li>
<li>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰
<ul>
<li>kmod-wireguard</li>
<li>luci-proto-wireguard</li>
<li>wireguard-tools</li>
<li>luci-app-wireguardï¼ˆå¯ä»¥ä¸é€‰ï¼Œè€Œä¸”åœ¨æˆ‘çš„menuconfigæ²¡æ‰¾åˆ°ï¼‰</li>
</ul>
</li>
<li>è¯¦ç»†é…ç½®è§ï¼š</li>
</ul>
<h5 id="zerotire">ZeroTire<a hidden class="anchor" aria-hidden="true" href="#zerotire">#</a></h5>
<ul>
<li>
<p>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰</p>
<ul>
<li>luci-app-zerotire</li>
</ul>
</li>
<li>
<p>é…ç½®å‚è€ƒï¼š<a href="https://www.youtube.com/watch?v=OzKBXBwBrUQ&amp;list=PLTI5d7Gwez7ri29l5OOOxoWbxooGqXzMR&amp;index=8">ã€éŸ©é£Talkã€‘Openwrtçš„Zerotieræ’ä»¶ç©æ³•ï¼Œå¼‚åœ°ç»„ç½‘ä¸æ±‚äººï¼Œå¤§è™šæ‹Ÿå±€åŸŸç½‘èµ°èµ·ï¼</a></p>
</li>
</ul>
<h4 id="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†<a hidden class="anchor" aria-hidden="true" href="#æ–‡ä»¶ç®¡ç†">#</a></h4>
<ul>
<li>
<p>æ‰€éœ€æ’ä»¶ï¼ˆå…·ä½“é…ç½®è·¯å¾„è§<a href="#menuconfig">è¿™é‡Œ</a>ï¼‰</p>
<ul>
<li>luci-app-filebrowserï¼šService -&gt; File Browser</li>
<li>luci-app-sambaï¼šNAS -&gt; Network Sharesï¼Œæœ‰ä¸€ç‚¹è§†é¢‘é‡Œè¯´çš„ç‚¹å‡»Pathä¼šè¿›å…¥<code>/luci/admin/system/fstab</code>ï¼Œä½†æ˜¯æˆ‘çš„menuconfigæ²¡æœ‰luci-app-fstabï¼Œå› æ­¤ä¼š404ï¼Œå¥½åœ¨å¦‚æœç¼–è¯‘äº†BaseSystem -&gt; block-mountçš„è¯è¿™ä¸ªurlï¼š<code>/luci/admin/system/mounts</code>è·Ÿè§†é¢‘é‡Œçš„æ˜¯ä¸€æ ·çš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸ªbug</li>
<li>luci-app-filetransferï¼šSystem -&gt; File Transferï¼Œç”¨äºä¸Šä¼ ipkåŒ…</li>
</ul>
</li>
<li>
<p>é…ç½®å‚è€ƒï¼š<a href="https://www.youtube.com/watch?v=LxEFpYvr72c&amp;list=PLTI5d7Gwez7ri29l5OOOxoWbxooGqXzMR&amp;index=11">ã€éŸ©é£Talkã€‘Openwrtæ–‡ä»¶ç®¡ç†çš„ç©æ³•åˆé›†ï¼Œè¿™æœŸé¡ºä¾¿è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼</a></p>
</li>
</ul>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="next" href="https://kyxie.me/zh/blog/tech/others/python-and-git-for-macos/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>ä½¿ç”¨Homebrewåœ¨MèŠ¯ç‰‡çš„MacBookå®‰è£…Pythonå’ŒGit</span>
  </a>
</nav>




  </footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">Tell me something...</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.5.10/dist/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-kyxie.vercel.app/",  
            el: "#tcomment",
            lang: 'en-US',
            region: '',  
            path: window.TWIKOO_MAGIC_PATH || window.location.pathname,
        });
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://kyxie.me/zh/">Kunyang&#39;s Blog</a></span>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_site_uv"></span>
        Views: <span id="busuanzi_value_site_pv"></span>
    </span>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const uvElement = document.getElementById('busuanzi_value_site_uv');
            const pvElement = document.getElementById('busuanzi_value_site_pv');
            const initialUv = 29000;
            const initialPv = 70000;
            if (!uvElement || !pvElement) {
                console.error("Busuanzi elements not found.");
                return;
            }
            const uvObs = new MutationObserver((mutationsList) => {
                for (let mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        uvObs.disconnect();
                        mutation.target.innerHTML = parseInt(mutation.target.innerHTML || 0) + initialUv;
                        break;
                    }
                }
            });
            const pvObs = new MutationObserver((mutationsList) => {
                for (let mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        pvObs.disconnect();
                        mutation.target.innerHTML = parseInt(mutation.target.innerHTML || 0) + initialPv;
                        break;
                    }
                }
            });
            uvObs.observe(uvElement, { childList: true });
            pvObs.observe(pvElement, { childList: true });
        });
    </script>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerText = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerText = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
